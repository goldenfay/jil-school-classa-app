(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{437:function(e,t,a){},607:function(e,t,a){e.exports=a(836)},612:function(e,t,a){},836:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),l=a.n(i),c=(a(612),a(437),a(42)),o=a(38),s=a(27),u=a(92),m=a(8),d=a(872),p=a(874),g=a(925),b=a(56),f=a(439),h=a(440),E=a(525),y=a(441),v=a(159),j=a(924),O=a(269),x=a.n(O),w=a(438),S=a(868),C=a(838),T=function(e){return r.a.createElement(C.a,Object.assign({},e,{direction:"up"}))};var k=function(e){var t=e.children,a=Object(o.a)(e,["children"]);return r.a.createElement(S.a,Object.assign({open:a.open,onClose:a.handleClose,TransitionComponent:T,key:a.Transition?a.Transition.name:"defaultTransition.key"},a),t)},P=a(368),N=a(873),q=Object(w.a)((function(e){return{container:{height:"100%",minHeight:300},box:{height:"100%",width:"100%"},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{height:"50%"}}}));var I=function(e){var t=q();return r.a.createElement(d.a,{className:t.container},e.controller&&r.a.createElement(P.a,{display:"flex",className:t.container,alignContent:"center",alignItems:"center",justifyContent:"center"},r.a.createElement(N.a,Object.assign({className:t.buttonProgress},e.progressStyles))),!e.controller&&e.component)},A=a(6),L="https://agile-stream-82857.herokuapp.com/api/user",R="https://agile-stream-82857.herokuapp.com/api/statistics",F="https://agile-stream-82857.herokuapp.com/api/admin/enseignants",D=L,B="https://agile-stream-82857.herokuapp.com/api/admin",_=L,H=R,U=function(e,t,a){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,adminType:a})};return fetch("".concat(B,"/signin"),n).then(z).then((function(e){var t=Object(A.a)(Object(A.a)({},e.admin),{},{description:"manager"===a?"Admin d'application":"Enseignant(e) en ".concat(e.admin.matiere.titre)});return e.token&&(localStorage.setItem("manager"===a?"manager":"enseignant",JSON.stringify(t)),localStorage.setItem("token",JSON.stringify(e.token))),t}),(function(e){return Promise.reject(e.message?e.message:e)}))};function W(){var e=JSON.parse(localStorage.getItem("token"));return e?{Authorization:"Bearer "+e}:{Authorization:""}}var M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"manager";return!(e.adminType&&e.adminType===t)};function z(e){return e.text().then((function(t){var a=t&&JSON.parse(t);if(!e.ok){e.status;var n=a&&a.message||e.statusText;return Promise.reject(n)}return Promise.resolve(a)}))}var G={login:U,updateProfile:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement l'administrateur qui peut mettre \xe0 jours son profile"});var t=["id","nom","prenom","email","phone","image","password","oldPassword","newPassword"],a=e.adminType,n=new FormData;Object.keys(e).forEach((function(a){t.includes(a)&&n.append(a,e[a])})),n.append("adminType",a);var r={method:"PUT",headers:Object(A.a)({},W()),body:n};return fetch("".concat(B,"/").concat(e.id),r).then(z)},getAllAbonnements:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les abonnements"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{"Content-Type":"application/json",adminType:e.adminType})};return fetch("".concat(_,"/abonnements"),t).then(z)},getAllAbonnes:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les abonn\xe9s"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{"Content-Type":"application/json",adminType:e.adminType})};return fetch("".concat(_,"/clients"),t).then(z)},getAllEleves:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les \xe9l\xe8ves"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{"Content-Type":"application/json",adminType:e.adminType})};return fetch("".concat(_,"/eleves"),t).then(z)},getAllClasses:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les classes"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{"Content-Type":"application/json",adminType:e.adminType})};return fetch("".concat(_,"/classes"),t).then(z)},getAllMatieres:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les classes"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(_,"/matieres/"),t).then(z)},getAllClassesMatieres:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les classes"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(_,"/classes/matieres"),t).then(z)},getAllPubs:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer toutes les pubs"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType,"Content-Type":"application/json"})};return fetch("".concat(_,"/pubs"),t).then(z)},addPub:function(e,t){if(console.log(e.adminType),M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement l'administrateur qui peut ajouter des Pubs"});var a=["sponsor","titre","type","image"];if(!a.every((function(t){return Object.keys(e).find((function(e){return e===t}))})))return Promise.reject({message:"Param\xe8tres manquants"});var n=e.adminType,r=new FormData;Object.keys(e).forEach((function(t){a.includes(t)&&r.append(t,e[t])})),r.append("adminType",n),e.link&&r.append("link",e.link);var i=Object(A.a)({method:"POST",headers:Object(A.a)({},W()),body:r},t);return fetch("".concat(_,"/pubs/new"),i).then(z)},updatePub:function(e,t){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement l'administrateur qui peut ajouter des Pubs"});if(!e.id)return Promise.reject({message:"Param\xe8tres manquants"});var a=["sponsor","titre","type","image"],n=e.adminType,r=new FormData;Object.keys(e).forEach((function(t){a.includes(t)&&r.append(t,e[t])})),r.append("adminType",n),e.link&&r.append("link",e.link);var i=Object(A.a)({method:"PUT",headers:Object(A.a)({},W()),body:r},t);return fetch("".concat(_,"/pubs/").concat(e.id),i).then(z)},deletePub:function(e,t){if(console.log(e.adminType),M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement l'administrateur qui peut ajouter des Pubs"});if(!e.id)return Promise.reject({message:"Param\xe8tres manquants"});var a={method:"DELETE",headers:Object(A.a)(Object(A.a)({},W()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("".concat(_,"/pubs/").concat(e.id),a).then(z)},getProfsStatistics:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer ces informations"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(H,"/enseignants/summary"),t).then(z)},getElevesStatistics:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer ces informations"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(H,"/eleves/summary"),t).then(z)}},V={login:function(e){var t=e.username,a=e.password,n=e.adminType;return G.login(t,a,n).then((function(e){return{type:"manager"===n?"SET_CURRENT_MANAGER":"SET_CURRENT_TEACHER",payload:e}}),(function(e){return console.error("Une errur s'est produite lors de la connexion : ",e),{type:"MANAGER_LOGIN_FAILED",payload:e}}))},logout:function(){return localStorage.removeItem("manager"),localStorage.removeItem("token"),localStorage.removeItem("enseignant"),{type:"LOGOUT"}},updateProfile:function(e){return function(t,a){return G.updateProfile(e).then((function(e){return localStorage.setItem("manager",JSON.stringify(e)),t({type:"UPDATE_PROFILE",payload:e}),Promise.resolve({ok:!0})}),(function(e){return t({type:"UPDATE_PROFILE_FAILED",payload:e}),Promise.reject({message:e})}))}},updateSelectedLink:function(e){return{type:"UPDATE_SELECTED_NAVLINK",payload:e}}};var J={login:U,register:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui peut ajouter un enseignant"});var t=["username","nom","prenom","email","phone","matiereId","classesIds","wilaya","commune"],a=Object.keys(e).filter((function(e){return t.includes(e)}));if(!t.every((function(e){return a.includes(e)})))return Promise.reject({message:"Les param\xe8tres de formulaire sont invalides"});var n={method:"POST",headers:Object(A.a)({"Content-Type":"application/json"},W()),body:JSON.stringify(e)};return fetch("".concat(F,"/new"),n).then(z)},updateProfile:function(e){if(M(e,"enseignant"))return Promise.reject({message:"Non autoris\xe9! Uniquement l'enseignant qui peut mettre \xe0 jours son profile"});var t=["id","nom","prenom","email","phone","image","password","oldPassword","newPassword"],a=e.adminType,n=new FormData;Object.keys(e).forEach((function(a){t.includes(a)&&n.append(a,e[a])})),n.append("adminType",a);var r={method:"PUT",headers:Object(A.a)({},W()),body:n};return fetch("".concat(B,"/").concat(e.id),r).then(z)},getAll:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les enseignants"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(F,"/"),t).then(z)},getById:function(e){if(M(e))return Promise.reject({message:"Non autoris\xe9! Uniquement le Manager qui r\xe9cup\xe9rer tous les enseignants"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(F,"/").concat(e.id),t).then(z)},getProfCourses:function(e){if(!e.adminType||"enseignant"!==e.adminType)return Promise.reject({message:"Non autoris\xe9! Uniquement l'enseignant qui r\xe9cup\xe9rer tous ses cours"});if(!e.id)return Promise.reject({message:"Param\xe8tres invalides"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(D,"/cours/enseignants/").concat(e.id),t).then(z)},addNewCourse:function(e){if(M(e,"enseignant"))return Promise.reject({message:"Non autoris\xe9! Uniquement l'enseignant qui peut ajouter un cours"});var t=["titre","ordre","trimestre","video","enseignant","matiere","classe","thumbnail","titrePdf","pdf","questionsList"],a=Object.keys(e);if(!t.every((function(e){return a.includes(e)})))return Promise.reject({message:"Les param\xe8tres de formulaire sont invalides"});var n=new FormData;t.forEach((function(t){return n.append(t,e[t])})),n.set("questionsList",JSON.stringify(e.questionsList.map((function(e){return{questionImgName:null!==e.questionImg?e.questionImg.file.name:null,answerImgName:null!==e.answerImg?e.answerImg.file.name:null}})))),e.questionsList.forEach((function(e){e.questionImg&&null!==e.questionImg&&n.append("cartesQuestions",e.questionImg.file),e.answerImg&&null!==e.answerImg&&n.append("cartesAnswers",e.answerImg.file)})),n.append("adminType",e.adminType),console.log(e.adminType);var r={method:"POST",headers:Object(A.a)({},W()),body:n};return fetch("".concat(D,"/cours/new"),r).then(z)},deleteCourse:function(e,t){if(M(e,"enseignant"))return Promise.reject({message:"Non autoris\xe9! Uniquement l'enseignant qui peut supprimer un cours"});if(!e.id)return Promise.reject({message:"Param\xe8tres manquants"});var a={method:"DELETE",headers:Object(A.a)(Object(A.a)({},W()),{},{"Content-Type":"application/json"}),body:JSON.stringify(e)};return fetch("".concat(D,"/cours/").concat(e.id),a).then(z)},getProfEleves:function(e){if(M(e,"enseignant"))return Promise.reject({message:"Non autoris\xe9! Uniquement l'enseignant qui r\xe9cup\xe9rer les \xe9l\xe8ves sp\xe9cifi\xe9s"});if(!e.id)return Promise.reject({message:"Param\xe8tres invalides"});var t={method:"GET",headers:Object(A.a)(Object(A.a)({},W()),{},{adminType:e.adminType})};return fetch("".concat(D,"/eleves/enseignants/").concat(e.id),t).then(z)}},Q={logout:function(){return localStorage.removeItem("token"),localStorage.removeItem("enseignant"),{type:"LOGOUT"}},updateProfile:function(e){return function(t,a){return J.updateProfile(e).then((function(e){var a=JSON.parse(localStorage.getItem("enseignant")),n=Object(A.a)(Object(A.a)({},a),e);return localStorage.setItem("enseignant",JSON.stringify(n)),t({type:"UPDATE_PROFILE",payload:n}),Promise.resolve({ok:!0})}),(function(e){return t({type:"UPDATE_PROFILE_FAILED",payload:e}),Promise.reject({message:e})}))}}},X=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},buttonProgress:{color:v.a[400],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));var $=Object(c.b)((function(e){return{loginStatus:e.adminReducer.status.loginStatus}}),(function(e){return{login:function(t){return V.login(t).then((function(t){return e(t)}))}}}))((function(e){var t=Object(s.i)(),a=X(),i=Object(n.useState)(e.loginStatus),l=Object(m.a)(i,2),c=(l[0],l[1],Object(n.useState)("")),o=Object(m.a)(c,2),v=o[0],O=o[1],w=Object(n.useState)(""),S=Object(m.a)(w,2),C=S[0],T=S[1],P=Object(n.useState)(!1),N=Object(m.a)(P,2),q=N[0],A=N[1],L=Object(n.createRef)(),R=Object(n.useState)(!1),F=Object(m.a)(R,2),D=F[0],B=F[1],_=Object(n.useState)(!1),H=Object(m.a)(_,2),U=H[0],W=H[1],M=r.a.createElement(j.a,{variant:"filled",severity:"error"},"Erreur d'authentification.",e.loginStatus&&e.loginStatus.message?e.loginStatus.message:""),z=function(e){"username"===e.target.name&&O(e.target.value),"password"===e.target.name&&T(e.target.value),"adminCheckbox"===e.target.name&&A(e.target.checked)};return r.a.createElement(d.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement(k,{open:D,onClose:function(){return B(!1)},autoHideDuration:6e3,children:M}),r.a.createElement("div",{className:a.paper},r.a.createElement(g.a,{className:a.avatar},r.a.createElement(x.a,null)),r.a.createElement(b.a,{component:"h1",variant:"h5"},"Authentification"),r.a.createElement("form",{className:a.form},r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Nom d'utilisateur",name:"username",value:v,onChange:z,autoComplete:"username",autoFocus:!0}),r.a.createElement(f.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Mot de passe",type:"password",id:"password",value:C,onChange:z,autoComplete:"current-password"}),r.a.createElement(h.a,{control:r.a.createElement(E.a,{name:"adminCheckbox",value:"remember",checked:q,color:"primary",disabled:U,onChange:z}),label:"Je suis un administrateur de l'application"}),r.a.createElement(I,{component:r.a.createElement(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:a.submit,component:u.b,to:"/",onClick:function(a){a.preventDefault(),W(!0),e.login({username:v,password:C,adminType:q?"manager":"enseignant"}).then((function(e){"MANAGER_LOGIN_FAILED"===e.type?(B(!0),W(!1)):(console.log("success"),a.returnValue=!0,q&&t("/"),!q&&t("/teacher"))}),(function(e){console.log("Erreur d'authentification"),console.log(e)}))},disabled:U,ref:L},"Se connecter"),controller:U,progressStyles:{color:"primary"}}))))})),K=a(877),Y=a(876),Z=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function ee(e){var t=Z();return r.a.createElement(d.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(g.a,{className:t.avatar},r.a.createElement(x.a,null)),r.a.createElement(b.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:t.form,noValidate:!0},r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(f.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0})),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname"})),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(f.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"}))),r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,href:"/dashboard"},"Sign Up"),r.a.createElement(Y.a,{container:!0,justify:"flex-end"},r.a.createElement(K.a,{component:"button",onClick:e.switchAuthMode,variant:"body2"},"Already have an account? Sign In")))))}var te=function(e){var t=Object(n.useState)(!0),a=Object(m.a)(t,2),i=a[0],l=a[1],c=function(){l((function(e){return!e}))};return r.a.createElement("div",null,i?r.a.createElement($,Object.assign({switchAuthMode:c},e)):r.a.createElement(ee,Object.assign({switchAuthMode:c},e)))},ae=Object(c.b)((function(e){return{}}),(function(e){return{logout:function(){return e(V.logout())}}}))((function(e){return e.logout(),window.location.assign("/login"),r.a.createElement("div",null)})),ne=a(31),re=a(3),ie=a(880),le=a(442),ce=a(369),oe=a(278),se=a.n(oe),ue=a(274),me=a.n(ue),de=a(275),pe=a.n(de),ge=a(536),be=a.n(ge),fe=a(537),he=a.n(fe),Ee=a(538),ye=a.n(Ee),ve=a(276),je=a.n(ve),Oe=a(277),xe=a.n(Oe),we=a(81),Se=a(535),Ce=a.n(Se),Te=a(569),ke=a(570),Pe=a(879),Ne=a(373),qe=a(878),Ie=Object(w.a)((function(e){return{listItem:{"&$selected":{backgroundColor:"".concat(e.palette.primary.light),color:"white"}},selected:{backgroundColor:"".concat(e.palette.primary.light),color:"white"}}}));var Ae=Object(c.b)((function(e){return{selectedLink:e.managerLayoutReducer.selectedLink}}),(function(e){return{updateSelectedLink:function(t){return e(V.updateSelectedLink(t))}}}))((function(e){var t=Ie(),a=e.item,i=a.link,l=a.ItemIcon,c=a.label,o=a.type,s=i&&(window.location.pathname===i||-1!==window.location.pathname.indexOf(i)),d=Object(n.useState)(i),p=Object(m.a)(d,2),g=p[0];return p[1],s&&e.updateSelectedLink({selectedLink:g}),"divider"===o?r.a.createElement(qe.a,null):r.a.createElement(ke.a,{button:!0,to:i,selected:e.selectedLink===g,className:t.listItem,component:u.b,onClick:function(){e.updateSelectedLink({selectedLink:g})}},r.a.createElement(Pe.a,null,r.a.createElement(l,null)),r.a.createElement(Ne.a,{primary:c}))}));var Le=function(e){var t=Object(n.useState)("hello"),a=Object(m.a)(t,2),i=a[0],l=a[1],c=e.navItems;return r.a.createElement(Te.a,null,c.map((function(e,t){return r.a.createElement(Ae,{key:t,item:e,handleClick:function(){return l(e.link)},label:i})})))},Re=function(e){return e.replace(/\s+/," ").split(" ").slice(0,2).map((function(e){return e&&e[0].toUpperCase()})).join("")},Fe=Object(w.a)((function(e){return{box:{marginBottom:e.spacing(2)},avatar:{cursor:"pointer",width:64,height:64,color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main},title:{textTransform:"capitalize"}}}));var De=function(e){var t=e.avatar,a=e.firstname,n=e.lastname,i=e.descriptionTitle,l=Fe();return r.a.createElement(P.a,{alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"column"},r.a.createElement(g.a,{className:"".concat(e.classes?e.classes.avatar:l.avatar),src:t,color:"secondary"}," ",Re("".concat(a," ").concat(n))),r.a.createElement(b.a,{color:"textPrimary",gutterBottom:!0,variant:"h6",className:l.title},"".concat(a," ").concat(n)),r.a.createElement(b.a,{color:"textSecondary",variant:"body1"},i),r.a.createElement(b.a,{className:l.dateText,color:"textSecondary",variant:"body1"}))};var Be=Object(c.b)((function(e){return{user:e.adminReducer.user}}))((function(e){var t=e.user;return r.a.createElement(De,{avatar:t.image,firstname:t.nom,lastname:t.prenom,descriptionTitle:t.description})}));function _e(e){var t=e.classes,a=e.open,n=e.handleDrawerClose;return r.a.createElement(we.a,{variant:"permanent",classes:{paper:Object(re.default)(t.drawerPaper,!a&&t.drawerPaperClose)},open:a},r.a.createElement("div",{className:t.toolbarIcon},r.a.createElement(ce.a,{onClick:n},r.a.createElement(Ce.a,null))),a&&r.a.createElement(Be,null),r.a.createElement("div",{className:t.toolbarIcon}),r.a.createElement(qe.a,null),r.a.createElement(Le,{navItems:e.navItems}))}var He=[{link:"/enseignants",ItemIcon:be.a,label:"Enseignants"},{link:"/abonnes",ItemIcon:he.a,label:"Abonn\xe9s"},{link:"/eleves",ItemIcon:me.a,label:"Eleves"},{link:"/pubs",ItemIcon:ye.a,label:"Pubs"},{link:"/statistiques",ItemIcon:pe.a,label:"Statistiques"},{type:"divider"},{link:"/profile",ItemIcon:je.a,label:"Profile"},{link:"/logout",ItemIcon:xe.a,label:"Deconnexion"}],Ue=Object(w.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(A.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ne.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function We(e){var t=Ue(),a=r.a.useState(!0),n=Object(m.a)(a,2),i=n[0],l=n[1];return r.a.createElement("div",{className:t.root},r.a.createElement(p.a,null),r.a.createElement(ie.a,{position:"absolute",className:Object(re.default)(t.appBar,i&&t.appBarShift)},r.a.createElement(le.a,{className:t.toolbar},r.a.createElement(ce.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){l(!0)},className:Object(re.default)(t.menuButton,i&&t.menuButtonHidden)},r.a.createElement(se.a,null)),r.a.createElement(b.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Dashboard"))),r.a.createElement(_e,{navItems:He,open:i,classes:t,handleDrawerClose:function(){l(!1)},decendentprops:{classes:t}}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(s.b,null)))}var Me=a(157),ze=a(881),Ge=a(443),Ve=a(162),Je=a(539),Qe=[{link:"/teacher/contenu",ItemIcon:a.n(Je).a,label:"Contenu"},{link:"/teacher/eleves",ItemIcon:me.a,label:"Eleves"},{link:"/teacher/statistiques",ItemIcon:pe.a,label:"Statistiques"},{type:"divider"},{link:"/teacher/profile",ItemIcon:je.a,label:"Profile"},{link:"/logout",ItemIcon:xe.a,label:"Deconnexion"}],Xe=Object(Me.a)({palette:{primary:Ge.a,secondary:Ve.a}}),$e=Object(w.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(A.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:300,width:"calc(100% - ".concat(300,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:300,boxShadow:e.shadows[14],transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(ne.a)({overflowX:"hidden",boxShadow:e.shadows[1],transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ke(e){var t=$e(),a=r.a.useState(!0),n=Object(m.a)(a,2),i=n[0],l=n[1];return r.a.createElement(ze.a,{theme:Xe},r.a.createElement("div",{className:t.root},r.a.createElement(p.a,null),r.a.createElement(ie.a,{position:"absolute",className:Object(re.default)(t.appBar,i&&t.appBarShift)},r.a.createElement(le.a,{className:t.toolbar},r.a.createElement(ce.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){l(!0)},className:Object(re.default)(t.menuButton,i&&t.menuButtonHidden)},r.a.createElement(se.a,null)),r.a.createElement(b.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:t.title},"Dashboard"))),r.a.createElement(_e,{navItems:Qe,open:i,classes:t,handleDrawerClose:function(){l(!1)},decendentprops:{classes:t}}),r.a.createElement("main",{className:t.content},r.a.createElement("div",{className:t.appBarSpacer}),r.a.createElement(s.b,null))))}var Ye=a(98),Ze=a(884),et=a(444),tt=a(445),at=a(165),nt=Object(Me.a)(),rt=Object(Me.a)({palette:{primary:{main:"#ff9800"},secondary:{main:"#f44336"}}}),it=Object(Me.a)({palette:{primary:et.a,secondary:tt.a,default:at.a}}),lt=a(540),ct=Object(n.forwardRef)((function(e,t){var a=e.children,n=e.title,i=void 0===n?"":n,l=Object(o.a)(e,["children","title"]);return r.a.createElement("div",Object.assign({ref:t},l),r.a.createElement(lt.a,null,r.a.createElement("title",null,i)),a)})),ot=a(1),st=a.n(ot),ut=a(882),mt=a(448),dt=a(450),pt=a(447),gt=a(883),bt=a(449),ft=a(446),ht=a(544),Et=a.n(ht),yt=a(543),vt=a.n(yt),jt=Object(w.a)({root:{"& > *":{borderBottom:"unset"}},head:{fontWeight:"bold",fontSize:"1.0rem"},rowHead:{fontWeight:"bold",fontSize:"0.9rem"}});function Ot(e){var t=e.row,a=e.headLabels,n=e.subHeadersTitle,i=e.subHeaderLabels,l=r.a.useState(!1),c=Object(m.a)(l,2),o=c[0],s=c[1],u=jt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ft.a,{className:u.root},r.a.createElement(pt.a,{width:10},r.a.createElement(ce.a,{"aria-label":"expand row",size:"small",onClick:function(){return s(!o)}},o?r.a.createElement(vt.a,null):r.a.createElement(Et.a,null))),a.map((function(e){return r.a.createElement(pt.a,{className:u.rowHead,key:"".concat(e.key,"-value"),align:"left"},t[e.key])}))),r.a.createElement(ft.a,null,r.a.createElement(pt.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.a.createElement(ut.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(P.a,{margin:1},r.a.createElement(b.a,{variant:"h6",gutterBottom:!0,component:"div"},n),r.a.createElement(mt.a,{size:"small"},r.a.createElement(bt.a,null,r.a.createElement(ft.a,null,i.map((function(e,t){return r.a.createElement(pt.a,{key:"".concat(t,"-").concat(e.label),align:"left"},e.label)})))),r.a.createElement(dt.a,null,t.children.map((function(e,t){return r.a.createElement(ft.a,{key:t},i.map((function(t,a){return r.a.createElement(pt.a,{key:"".concat(a,"-").concat(e[t.key])},e[t.key])})))})))))))))}function xt(e){var t=e.headLabels,a=e.subHeaderLabels,n=e.subHeadersTitle,i=e.rows,l=(Object(o.a)(e,["headLabels","subHeaderLabels","subHeadersTitle","rows"]),jt());return r.a.createElement(gt.a,{component:Ye.a},r.a.createElement(mt.a,{"aria-label":"collapsible table"},r.a.createElement(bt.a,null,r.a.createElement(ft.a,null,r.a.createElement(pt.a,{width:10}),t.map((function(e){return r.a.createElement(pt.a,{className:l.head,align:"left",key:e.key},e.label)})))),r.a.createElement(dt.a,null,i.map((function(e,i){return r.a.createElement(Ot,{key:i,row:e,subHeaderLabels:a,subHeadersTitle:n,headLabels:t})})))))}Ot.prototype={row:st.a.object.isRequired,headLabels:st.a.array.isRequired,subHeadersTitle:st.a.array.isRequired,subHeaderLabels:st.a.array.isRequired},xt.prototype={rows:st.a.array.isRequired,headLabels:st.a.array.isRequired,subHeadersTitle:st.a.array.isRequired,subHeaderLabels:st.a.array.isRequired};var wt=a(885),St=Object(w.a)((function(e){return{button:{margin:e.spacing(1),color:"white"},fab:{color:"white",backgroundColor:e.palette.success.light}}}));function Ct(e){var t=St(),a=Object(n.useState)([]),i=Object(m.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)(!1),s=Object(m.a)(o,2),u=s[0],p=s[1];return Object(n.useEffect)((function(){p(!0),G.getAllClasses({adminType:"manager"}).then((function(e){var t=[{cycle:"Primaire",children:[]},{cycle:"CEM",children:[]},{cycle:"Lyc\xe9",children:[]}];e.classes.forEach((function(e){t[e.cycle-1].children.push({codeCl:e.codeCl,description:e.description})})),console.log(t),c(t),p(!1)}),(function(e){console.log(e),p(!1)}))}),[]),r.a.createElement(ct,{className:t.root,title:"Tableau de Bord"},r.a.createElement(ze.a,{theme:nt},r.a.createElement(d.a,{maxWidth:"lg",className:t.container},r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(I,{component:r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(P.a,{p:3},r.a.createElement(b.a,{variant:"h4",color:"primary"},"Annuaire des cycles/ann\xe9es")),r.a.createElement(xt,{headLabels:[{key:"cycle",label:"Cycles"}],rows:l,subHeaderLabels:[{key:"codeCl",label:"Classe"},{key:"description",label:"Intitul\xe9"}],subHeadersTitle:"Classes associ\xe9es"}),r.a.createElement(P.a,{m:3,p:3,display:"flex",justifyContent:"flex-end"},r.a.createElement(Ze.a,{className:t.fab},r.a.createElement(wt.a,null)))),controller:u}))))))}var Tt=a(900),kt=a(183),Pt=a(893),Nt=a(894),qt=a(896),It=a(898),At=a(895),Lt=a(899),Rt=a(897),Ft=a(160),Dt=a(901),Bt=a(287),_t=a.n(Bt),Ht=a(549),Ut=a.n(Ht),Wt=a(205),Mt=a.n(Wt),zt=a(26),Gt=a(528),Vt=a(527),Jt=a(886),Qt=a(526);function Xt(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,i=e.orderBy,l=e.numSelected,c=e.rowCount,o=e.onRequestSort,s=e.headCells,u=e.withActions,m=e.withStartCheckbox;return r.a.createElement(bt.a,null,r.a.createElement(ft.a,null,m&&r.a.createElement(pt.a,{padding:"checkbox"},r.a.createElement(E.a,{indeterminate:l>0&&l<c,checked:c>0&&l===c,onChange:a,inputProps:{"aria-label":"select all desserts"}})),s.map((function(e){return r.a.createElement(pt.a,{key:e.id,align:"left",padding:e.disablePadding?"none":"default",sortDirection:i===e.id&&n},r.a.createElement(Qt.a,{active:i===e.id,direction:i===e.id?n:"asc",onClick:(a=e.id,function(e){o(e,a)})},e.label,i===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a})),u&&r.a.createElement(pt.a,{key:"actionColumn",align:"center"},"Actions")))}var $t=a(13),Kt=a(375),Yt=a.n(Kt),Zt=a(374),ea=a.n(Zt),ta=a(451),aa=Object(w.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object($t.i)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}}));function na(e){var t=aa(),a=e.numSelected,n=e.title;return r.a.createElement(le.a,{className:Object(re.default)(t.root,Object(ne.a)({},t.highlight,a>0))},a>0?r.a.createElement(b.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," selected"):r.a.createElement(b.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},n),a>0?r.a.createElement(ta.a,{title:"Delete"},r.a.createElement(ce.a,{"aria-label":"delete"},r.a.createElement(ea.a,null))):r.a.createElement(ta.a,{title:"Filter list"},r.a.createElement(ce.a,{"aria-label":"filter list"},r.a.createElement(Yt.a,null))))}function ra(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var ia=Object(w.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2),padding:e.spacing(2)},avatar:{marginRight:e.spacing(2)},chip:{margin:e.spacing(.5),color:e.palette.primary},button:{margin:e.spacing(1),color:"white"},table:{minWidth:750},tableRow:{cursor:"pointer"},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function la(e){var t=e.tableTitle,a=e.rows,n=e.headCells,i=e.indexName,l=e.handleRowSelected,c=e.withStartCheckbox,s=void 0===c||c,u=(e.withFiltering,e.withActions),d=void 0!==u&&u,p=e.actionButtons,f=e.customtheme,v=Object(o.a)(e,["tableTitle","rows","headCells","indexName","handleRowSelected","withStartCheckbox","withFiltering","withActions","actionButtons","customtheme"]),j=ia(),O=Object(zt.a)(),x=r.a.useState("asc"),w=Object(m.a)(x,2),S=w[0],C=w[1],T=r.a.useState("calories"),k=Object(m.a)(T,2),N=k[0],q=k[1],I=r.a.useState([]),A=Object(m.a)(I,2),L=A[0],R=A[1],F=r.a.useState(0),D=Object(m.a)(F,2),B=D[0],_=D[1],H=r.a.useState(!0),U=Object(m.a)(H,2),W=U[0],M=U[1],z=r.a.useState(5),G=Object(m.a)(z,2),V=G[0],J=G[1],Q=function(e,t){var a=L.indexOf(t),n=[];-1===a?n=n.concat(L,t):0===a?n=n.concat(L.slice(1)):a===L.length-1?n=n.concat(L.slice(0,-1)):a>0&&(n=n.concat(L.slice(0,a),L.slice(a+1))),R(n)},X=V-Math.min(V,a.length-B*V);return r.a.createElement("div",{className:j.root},r.a.createElement(Ye.a,{className:j.paper},r.a.createElement(na,{numSelected:L.length,title:t}),r.a.createElement(gt.a,null,r.a.createElement(mt.a,{className:j.table,"aria-labelledby":"tableTitle",size:W?"small":"medium","aria-label":"enhanced table"},r.a.createElement(Xt,{headCells:n,withStartCheckbox:s,withActions:d,classes:j,numSelected:L.length,order:S,orderBy:N,onSelectAllClick:function(e){if(e.target.checked){var t=a.map((function(e){return e.name}));R(t)}else R([])},onRequestSort:function(e,t){C(N===t&&"asc"===S?"desc":"asc"),q(t)},rowCount:a.length}),r.a.createElement(dt.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(a,function(e,t){return"desc"===e?function(e,a){return ra(e,a,t)}:function(e,a){return-ra(e,a,t)}}(S,N)).slice(B*V,B*V+V).map((function(e,t){var a,c=(a=e[i],-1!==L.indexOf(a)),o="enhanced-table-checkbox-".concat(t);return r.a.createElement(ft.a,{hover:!0,className:j.tableRow,onClick:function(t){v.rowClickHandler?v.rowClickHandler(e[i]):l?l(t,e[i],Q):Q(0,e[i])},role:"checkbox","aria-checked":c,tabIndex:-1,key:e[i],selected:c},s&&r.a.createElement(pt.a,{padding:"checkbox"},r.a.createElement(E.a,{checked:c,inputProps:{"aria-labelledby":o}})),n.map((function(t,a){var i,l=t.id;return r.a.createElement(pt.a,{align:"left",key:"".concat(t.id,"-").concat(a)},r.a.createElement(P.a,{display:"flex",alignItems:"center"},(i=l,"undefined"!==typeof n.find((function(e){return e.id===i&&!0===e.withAvatar}))?r.a.createElement(P.a,{display:"flex",alignItems:"center"},r.a.createElement(g.a,{className:j.avatar,src:e.avatarUrl},Re(e[l]))):null),t.withChip&&function(){var a=e[l];return a instanceof Array||(a=[a]),t.usesInnerTheme?r.a.createElement(ze.a,{theme:v.innerTheme},a.map((function(e,t){return r.a.createElement(Vt.a,Object.assign({key:t,className:j.chip},e,{color:e.color||(t%3===0?"primary":t%3===1?"secondary":"default"),label:e.label,size:"small"}))}))):r.a.createElement(ze.a,{theme:O},a.map((function(e,t){return r.a.createElement(Vt.a,Object.assign({key:t,className:"".concat(j.chip)},e,{color:e.color||(t%3===0?"primary":t%3===1?"secondary":"default"),style:{color:"outlined"!==e.variant?"white":"inherit"},label:e.label,size:"small"}))})))}(),t.withChildComponent&&r.a.createElement(r.a.Fragment,null,e[l]),!t.withChip&&!t.withChildComponent&&r.a.createElement(b.a,{color:"textPrimary",variant:"body1",className:"mx-2"},e[l])))})),d&&r.a.createElement(pt.a,{align:"center"},d&&p&&p.map((function(t,a){return f?r.a.createElement(Y.a,{container:!0,justify:"center",spacing:3},r.a.createElement(ze.a,{theme:f},r.a.createElement(Y.a,{item:!0,xs:12,md:10}," ",r.a.createElement(y.a,{fullWidth:!0,color:t.color||"primary",className:"px-2",variant:"contained",startIcon:r.a.createElement(t.startIcon,null),onClick:function(){return t.clickHandler(e[i])}},t.label)))):r.a.createElement(y.a,{key:a,fullWidth:!t.fullWidth||t.fullWidth,color:t.color||"success",className:"px-2 ".concat(j.button),variant:t.variant||"contained",startIcon:r.a.createElement(t.startIcon,null),onClick:function(){return t.clickHandler(e[i])}},t.label)}))))})),X>0&&r.a.createElement(ft.a,{style:{height:(W?33:53)*X}},r.a.createElement(pt.a,{colSpan:6}))))),r.a.createElement(Gt.a,{rowsPerPageOptions:[5,10,25],component:"div",count:a.length,rowsPerPage:V,page:B,onChangePage:function(e,t){_(t)},onChangeRowsPerPage:function(e){J(parseInt(e.target.value,10)),_(0)}})),r.a.createElement(h.a,{control:r.a.createElement(Jt.a,{checked:W,onChange:function(e){M(e.target.checked)}}),label:W?"Condens\xe9":"Condenser"}))}var ca=a(72),oa=a(19),sa=a(452),ua=a(96),ma=Object(w.a)((function(e){return{form:{margin:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),da=r.a.forwardRef((function(e,t){var a=ma(),i=Object(n.useRef)();return Object(n.useEffect)((function(){e.submitRefTracker&&e.submitRefTracker(i)}),[i]),r.a.createElement(ua.a,{initialValues:e.initialState,validationSchema:e.validationSchema,enableReinitialize:!e.reset||e.reset,onSubmit:e.onSubmit},(function(n){var l=n.errors,c=n.handleBlur,o=n.handleChange,s=n.handleSubmit,u=(n.isSubmitting,n.touched);n.values;return r.a.createElement("form",{className:a.form,onSubmit:function(e){e.preventDefault(),s(e)},ref:t,encType:"multipart/form-data"},r.a.createElement(Y.a,{container:!0,spacing:2},e.fieldsHiearchy&&e.fieldsHiearchy.map((function(t,a){return t instanceof Array||(t=[t]),t.map((function(n,i){return r.a.createElement(Y.a,{item:!0,xs:12,sm:Math.floor(12/t.length),key:"".concat(a,"-").concat(i)},"input"===n.type&&r.a.createElement(f.a,Object.assign({key:n.props.name,error:Boolean(u[n.props.name]&&l[n.props.name]),helperText:u[n.props.name]&&l[n.props.name],onBlur:c,onChange:function(t){o(t),e.onChange&&e.onChange(t)},variant:"outlined",fullWidth:!0,id:"".concat(n.props.name,"-input")},n.props)),"select"===n.type&&r.a.createElement(f.a,Object.assign({error:Boolean(u[n.props.name]&&l[n.props.name]),helperText:u[n.props.name]&&l[n.props.name],onBlur:c,onChange:function(t){o(t),e.onChange&&e.onChange(t)},variant:"outlined",fullWidth:!0,id:"".concat(n.props.name,"-input")},n.props),n.children&&n.children.map((function(e,t){return r.a.createElement(sa.a,{key:e.key,value:e.value},e.label)}))),"formControl"===n.type&&r.a.createElement(r.a.Fragment,null,n.children))}))}))),!e.noSubmit&&r.a.createElement(Y.a,{container:!0,justify:"flex-end"},r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,ref:i},e.submitLabel))))}))})),pa=Object(w.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}})),ga=oa.c({username:oa.d().max(20,"Le nom de famille ne doit pas d\xe9passer 20 caract\xe8res").min(5,"Le nom d'utilisateur doit contenir au moins 5 caract\xe8res").required("Champs Obligatoire"),nom:oa.d().min(3,"Le nom doit contenir au moins 3 caract\xe8res").max(20,"Le nom de famille ne doit pas d\xe9passer 20 caract\xe8res").required("Champs Obligatoire"),prenom:oa.d().min(3,"Le pr\xe9nom doit contenir au moins 3 caract\xe8res").max(50,"Le pr\xe9nom ne doit pas d\xe9passer 50 caract\xe8res").required("Champs Obligatoire"),email:oa.d().email("Adresse Email invalide").required("Champs Obligatoire"),phone:oa.d().trim().matches(/^0[5679]\d{8}$/,"Num\xe9ro de t\xe9lephone invalide").required("Champs Obligatoire"),cycle:oa.b().required("Champs Obligatoire"),matiere:oa.d().required("Champs Obligatoire"),classes:oa.a().required("Champs Obligatoire"),commune:oa.d().required("Champs Obligatoire"),wilaya:oa.d().required("Champs Obligatoire")}),ba={type:"input",props:{name:"username",required:!0,type:"text",label:"Nom d'utilisateur"}},fa={type:"input",props:{name:"nom",required:!0,type:"text",label:"Nom"}},ha={type:"input",props:{name:"prenom",required:!0,type:"text",label:"Prenom"}},Ea={type:"input",props:{name:"email",required:!0,type:"email",label:"Email"}},ya={type:"input",props:{name:"phone",required:!0,type:"text",label:"T\xe9lephone"}};function va(e){var t={username:"",nom:"",prenom:"",wilaya:"",commune:"",cycle:"",matieresIds:[],classes:[],matiere:"",email:"",phone:""},a=Object(n.useState)([]),i=Object(m.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)(!1),s=Object(m.a)(o,2),u=s[0],g=s[1],f=Object(n.createRef)(),h=Object(n.useState)({formState:t,listeW:[],listC:[],formStructure:[]}),E=Object(m.a)(h,2),y=E[0],v=E[1],O=Object(n.useState)(!1),x=Object(m.a)(O,2),w=x[0],S=x[1],C=Object(n.useState)({severity:"success",message:"Enseignant enregistr\xe9 avec succ\xe8s"}),T=Object(m.a)(C,2),P=T[0],N=T[1];Object(n.useEffect)((function(){fetch("/assets/communes-wilayas-ar.json").then((function(e){return e.json()})).then((function(e){var t={};e.forEach((function(e){t[e.codeW]=e.wilaya}));var a=Object.keys(t).map((function(e){return{codeW:e,nomW:t[e]}}));ba.props.value=y.formState.username,fa.props.value=y.formState.nom,ha.props.value=y.formState.prenom,Ea.props.value=y.formState.email,ya.props.value=y.formState.phone;var n=[{type:"select",props:{name:"wilaya",required:!0,select:!0,label:"Wilaya",value:y.formState.wilaya},children:a.map((function(e){return{key:e.codeW,value:e.nomW,label:e.nomW}}))},{type:"select",props:{name:"commune",required:!0,select:!0,label:"Commune",value:y.formState.commune},children:e.map((function(e){return{key:e.id,value:e.id,label:e.baladiya}}))}];G.getAllClassesMatieres({adminType:"manager"}).then((function(t){console.log("Server response for classes :",t);var r=[],i=[];t.classes.forEach((function(e){r.push(e),e.matieres.forEach((function(e,t){i.find((function(t){return t.titre===e.titre}))||i.push(Object(A.a)({},e))}))}));var l=i,o={type:"select",props:{name:"matiere",required:!0,select:!0,label:"Mati\xe8re",value:y.formState.matiere},children:l.map((function(e){return{key:e.id,value:e.id,label:e.titre}}))},s=[].concat(Object(ca.a)(y.formStructure),[[ba],[fa,ha],[o,{type:"select",props:{name:"cycle",required:!0,select:!0,multiple:!0,label:"Cycle",value:""},children:[]},{type:"select",props:{name:"classes",required:!0,select:!0,multiple:!0,label:"Classes enseign\xe9s",value:[],SelectProps:{multiple:!0}},children:[]}],n,[Ea],[ya]]);c(s),v(Object(A.a)(Object(A.a)({},y),{},{listC:e,listeW:a,listeAnnes:r,listeMatieres:l,formStructure:s}))}),(function(e){console.log(e)}))}))}),[]);var q=pa();return r.a.createElement(d.a,{component:"main",maxWidth:"xl"},r.a.createElement(p.a,null),r.a.createElement(k,{open:w,onClose:function(){return S(!1)},autoHideDuration:6e3,children:r.a.createElement(j.a,{variant:"filled",severity:P.severity},P.message)}),r.a.createElement("div",{className:q.paper},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Ajouter un nouvel enseignant"),r.a.createElement(I,{component:r.a.createElement(da,{ref:f,validationSchema:ga,fieldsHiearchy:y.formStructure,initialState:y.formState,onChange:function(e){v(Object(A.a)(Object(A.a)({},y),{},{formState:Object(A.a)(Object(A.a)({},y.formState),{},Object(ne.a)({},e.target.name,"commune"===e.target.name?y.listC.find((function(t){return t.id===e.target.value})).baladiya:e.target.value)),formStructure:y.formStructure.map((function(t){return t.map((function(t){if("wilaya"===e.target.name&&"commune"===t.props.name){var a=y.listC.filter((function(t){return t.wilaya===e.target.value})).map((function(e){return{key:e.id,value:e.id,label:e.baladiya}}));return Object(A.a)(Object(A.a)({},t),{},{children:a,props:Object(A.a)(Object(A.a)({},t.props),{},{value:a[0].value})})}if("matiere"===e.target.name&&"cycle"===t.props.name){var n=Array.from(new Set(y.listeAnnes.filter((function(t){return"undefined"!==typeof t.matieres.find((function(t){return t.id===e.target.value}))})).map((function(e){return e.cycle}))));console.log(e.target.value,"LABELS : ",n);var r=n.map((function(e){return{key:e,value:e,label:1===e?"Primaire":2===e?"Moyen":"Lyc\xe9"}}));return Object(A.a)(Object(A.a)({},t),{},{children:r,props:Object(A.a)(Object(A.a)({},t.props),{},{value:""})})}if("matiere"===e.target.name&&"classes"===t.props.name)return Object(A.a)(Object(A.a)({},t),{},{children:[],props:Object(A.a)(Object(A.a)({},t.props),{},{value:""})});if("cycle"===e.target.name&&"classes"===t.props.name){var i=y.listeAnnes.filter((function(t){return t.cycle===e.target.value&&t.matieres.find((function(e){return e.id===y.formState.matiere}))})).map((function(e){return{key:"".concat(e.id),value:"".concat(e.id),label:"".concat(e.dexription&&""!==e.dexription&&e.dexription||e.codeCl)}}));return Object(A.a)(Object(A.a)({},t),{},{children:i,props:Object(A.a)(Object(A.a)({},t.props),{},{value:[]})})}return t.props.name===e.target.name?Object(A.a)(Object(A.a)({},t),{},{props:Object(A.a)(Object(A.a)({},t.props),{},{value:e.target.value})}):t}))}))}))},onSubmit:function(e){console.log(e),console.log(y.formState);var a=y.formState,n=a.username,r=a.nom,i=a.prenom,c=a.email,o=a.phone,s=a.wilaya,u=a.commune,m=a.matiere,d=a.classes;g(!0),J.register({username:n,nom:r,prenom:i,email:c,phone:o,wilaya:s,commune:u,matiereId:m,classesIds:d,adminType:"manager"}).then((function(e){console.log("Registration results : ",e),N({severity:"success",message:"Enseignant enregistr\xe9 avec succ\xe8s"}),S(!0),g(!1),v(Object(A.a)(Object(A.a)({},y),{},{formState:t,formStructure:l}))}),(function(e){console.error(e),N({severity:"error",message:"Une erreur s'est produite ".concat(e.message&&e.message||e)}),S(!0),g(!1)}))},submitLabel:"Enregistrer",state:y}),controller:u})))}var ja=a(5),Oa=a(890),xa=a(887),wa=a(888),Sa=a(889),Ca=a(376),Ta=a.n(Ca),ka=Object(ja.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,i=Object(o.a)(e,["children","classes","onClose"]);return r.a.createElement(xa.a,Object.assign({disableTypography:!0,className:a.root},i),r.a.createElement(b.a,{variant:"h6"},t),n?r.a.createElement(ce.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(Ta.a,null)):null)})),Pa=Object(ja.a)((function(e){return{root:{padding:e.spacing(2)}}}))(wa.a),Na=Object(ja.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Sa.a);function qa(e){var t=r.a.useState(e.open),a=Object(m.a)(t,2),i=a[0],l=a[1];Object(n.useEffect)((function(){l(e.open)}),[e.open]);return r.a.createElement("div",null,r.a.createElement(Oa.a,{onClose:e.handleClose,"aria-labelledby":"customized-dialog-title",open:i,maxWidth:"lg",fullWidth:!0},r.a.createElement(ka,{id:"customized-dialog-title",onClose:e.handleClose||function(){l(!1)}},e.title),r.a.createElement(Pa,{dividers:!0},e.body),r.a.createElement(Na,null,e.actions&&e.actions.map((function(e,t){return r.a.createElement(y.a,Object.assign({autoFocus:!0,key:t,onClick:e.clickHandler},e,{color:e.color||"primary"}),e.label)})))))}qa.prototype={open:st.a.bool.isRequired,title:st.a.any.isRequired,body:st.a.any.isRequired};var Ia=qa,Aa=a(891),La=a(892);var Ra=function(e){return r.a.createElement(Ye.a,{elevation:3},r.a.createElement(Aa.a,null,r.a.createElement(La.a,null,r.a.createElement(De,{firstname:e.nom,lastname:e.prenom,avatar:e.image,descriptionTitle:e.jobTitle,classes:e.classes})),r.a.createElement(qe.a,null),e.additionalContent))},Fa=[{id:"nom",numeric:!1,disablePadding:!0,label:"Nom"},{id:"prenom",numeric:!1,disablePadding:!1,label:"Pr\xe9nom"},{id:"eleves",numeric:!1,disablePadding:!0,label:"Eleves",withChip:!0,usesInnerTheme:!0},{id:"wilaya",numeric:!1,disablePadding:!1,label:"Wilaya"},{id:"commune",numeric:!1,disablePadding:!1,label:"Commune"},{id:"phone",numeric:!1,disablePadding:!1,label:"T\xe9lephone"},{id:"status",numeric:!1,disablePadding:!1,label:"Etat",withChip:!0}],Da=[{id:"code_achat",numeric:!1,disablePadding:!0,label:"Code d'achat"},{id:"date_debut",numeric:!1,disablePadding:!1,label:"Date"},{id:"type",numeric:!1,disablePadding:!0,label:"Type"},{id:"duree",numeric:!1,disablePadding:!0,label:"Durre"},{id:"classesLabels",numeric:!1,disablePadding:!0,label:"Classes Inscrites",withChip:!0,usesInnerTheme:!0},{id:"owner",numeric:!1,disablePadding:!1,label:"Client"},{id:"status",numeric:!1,disablePadding:!1,label:"Etat",withChip:!0}],Ba=[{id:"nom",numeric:!1,disablePadding:!0,label:"Nom",withAvatar:!0},{id:"prenom",numeric:!1,disablePadding:!1,label:"Pr\xe9nom"},{id:"classes",numeric:!1,disablePadding:!1,label:"Classes",withChip:!0,usesInnerTheme:!0},{id:"matiere",numeric:!1,disablePadding:!1,label:"Mati\xe8re"},{id:"wilaya",numeric:!1,disablePadding:!1,label:"Wilaya"},{id:"commune",numeric:!1,disablePadding:!1,label:"Commune"},{id:"date_ajout",numeric:!1,disablePadding:!1,label:"Date d'ajout "}],_a=[{id:"nom",numeric:!1,disablePadding:!0,label:"Nom",withAvatar:!0},{id:"classe",numeric:!1,disablePadding:!1,label:"Classe",withChip:!0,usesInnerTheme:!0},{id:"age",numeric:!1,disablePadding:!1,label:"Age"},{id:"sexe",numeric:!1,disablePadding:!1,label:"Genre"},{id:"date_ajout",numeric:!1,disablePadding:!1,label:"Date d'ajout "}],Ha=[{id:"titre",numeric:!1,disablePadding:!0,label:"Titre"},{id:"sponsor",numeric:!1,disablePadding:!1,label:"Publicateur"},{id:"thumbnail",numeric:!1,disablePadding:!1,label:"Aper\xe7u",withChildComponent:!0},{id:"actions",numeric:!1,disablePadding:!1,label:"Actions",withChildComponent:!0}],Ua=[{id:"titre",numeric:!1,disablePadding:!0,label:"Titre"},{id:"video",numeric:!1,disablePadding:!1,label:"URL Vid\xe9o"},{id:"thumbnail",numeric:!1,disablePadding:!1,label:"Ap\xe9r\xe7u"},{id:"date_ajout",numeric:!1,disablePadding:!1,label:"Date d'ajout"}],Wa=[{color:"primary",label:"Signaler",clickHandler:function(e){return console.log(e)},startIcon:Ut.a},{color:"secondary",label:"R\xe9silier",clickHandler:function(e){return console.log(e)},startIcon:Mt.a}],Ma=Object(Me.a)({palette:{primary:{main:"#4caf50"},secondary:{main:"#f44336"}}}),za=Object(Me.a)({palette:{primary:Ve.a,secondary:tt.a,error:Ft.a}}),Ga=Object(w.a)((function(e){return{button:{margin:e.spacing(1),color:"white"}}}));function Va(e){var t=Ga(),a=Object(n.useState)([]),i=Object(m.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)([]),s=Object(m.a)(o,2),u=s[0],p=s[1],g=Object(n.useState)(!1),h=Object(m.a)(g,2),E=h[0],v=h[1],j=Object(n.useState)(!1),O=Object(m.a)(j,2),x=O[0],w=O[1],S=Object(n.useState)(!1),C=Object(m.a)(S,2),T=C[0],k=C[1];Object(n.useEffect)((function(){v(!0),J.getAll({adminType:"manager"}).then((function(e){v(!1),console.log("Suceess Fetch profs",e);var t=e.enseignants.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{matiere:e.matiere.titre,classes:e.classes.map((function(e){return{label:e.codeCl,clickable:!0}}))})}));p(t),c(t)}),(function(e){v(!1),console.log("Error ",e)}))}),[]);var N=Object(n.useState)(r.a.createElement(r.a.Fragment,null)),q=Object(m.a)(N,2),L=q[0],R=q[1];return r.a.createElement(ct,{className:t.root,title:"Enseignants"},r.a.createElement(ze.a,{theme:nt},r.a.createElement(d.a,{maxWidth:"lg",className:t.container},r.a.createElement(Ia,{open:T,title:"Carte Informative",body:L,handleClose:function(){return k(!1)}}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{container:!0,justify:"flex-end"}),r.a.createElement(Y.a,{item:!0,xs:12,sm:8},r.a.createElement(P.a,{mt:3},r.a.createElement(P.a,{maxWidth:500},r.a.createElement(f.a,{fullWidth:!0,InputProps:{startAdornment:r.a.createElement(Tt.a,{position:"start"},r.a.createElement(kt.a,{fontSize:"small",color:"action"},r.a.createElement(Dt.a,null)))},placeholder:"Rechercher un enseignants ...",variant:"outlined",onChange:function(e){return function(e){if(e.target.value.length<4)p(l);else{var t=e.target.value;p(l.filter((function(e){return e.nom&&-1!==e.nom.indexOf(t)||e.prenom&&-1!==e.prenom.indexOf(t)})))}}(e)}})))),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(P.a,{mt:3,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"row"},r.a.createElement(ze.a,{theme:Ma},r.a.createElement(y.a,{size:"medium",variant:"contained",className:t.button,startIcon:r.a.createElement(_t.a,null),color:"primary",onClick:function(e){return w(!0)}},"Ajouter")))),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(ze.a,{theme:rt},r.a.createElement(I,{component:r.a.createElement(la,{tableTitle:"Liste des enseignants",headCells:Ba,rows:u,rowClickHandler:function(e){J.getById({id:e,adminType:"manager"}).then((function(e){var t=e,a=t.nom,n=t.prenom,i=t.image,l=t.classes;k(!0),R(r.a.createElement(d.a,null,r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:12,sm:5},r.a.createElement(Ra,{nom:a,prenom:n,image:i,jobTitle:"Enseignant en ".concat(t.matiere.titre),classes:l})),r.a.createElement(Y.a,{item:!0,xs:12,sm:7},r.a.createElement(Ye.a,{elevation:3,style:{padding:"1rem"}},r.a.createElement(b.a,{color:"textPrimary",variant:"h6"},"Derniers cours ajout\xe9s"),r.a.createElement(Pt.a,{align:"alternate"},!t.cours.length&&r.a.createElement(b.a,{color:"textSecondary",variant:"caption"},"Aucun cours n'est ajout\xe9 par cet enseignant"),t.cours.map((function(e,t){return r.a.createElement(Nt.a,{key:t},r.a.createElement(At.a,null,r.a.createElement(b.a,{color:"textSecondary"},new Date(e.date_ajout).toLocaleDateString("fr-FR")," ",new Date(e.date_ajout).toLocaleTimeString("fr-FR"))),r.a.createElement(qt.a,null,r.a.createElement(Rt.a,{color:t%2===0?"primary":"secondary"}),r.a.createElement(It.a,null)),r.a.createElement(Lt.a,null,r.a.createElement(b.a,null,e.titre)))}))))))))}),(function(e){}))},indexName:"id",withActions:!0,actionButtons:Wa,innerTheme:za}),controller:E})))),x&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(ze.a,{theme:nt},r.a.createElement(va,null))))))))}var Ja=[{color:"secondary",label:"Desabonner",clickHandler:function(e){return console.log(e)},startIcon:Mt.a}],Qa=Object(Me.a)({palette:{primary:at.a,secondary:Ve.a}}),Xa=Object(w.a)((function(e){return{button:{margin:e.spacing(2)},grid:{margin:e.spacing(2),padding:e.spacing(1)},paper:{padding:e.spacing(1)},chip:{margin:e.spacing(1)}}}));function $a(e){var t=Xa(rt),a=Object(re.default)(t.paper,t.fixedHeight),i=Object(n.useState)([]),l=Object(m.a)(i,2),c=l[0],o=l[1],s=Object(n.useState)([]),p=Object(m.a)(s,2),b=p[0],h=p[1],E=Object(n.useState)([]),y=Object(m.a)(E,2),v=y[0],j=y[1],O=Object(n.useState)(!1),x=Object(m.a)(O,2),w=x[0],S=x[1];Object(n.useEffect)((function(){S(!0),G.getAllAbonnes({adminType:"manager"}).then((function(e){var t=e.clients.map((function(e){var t=e.eleves.map((function(e){return{avatar:r.a.createElement(g.a,{alt:e.nom,src:e.avatar}),label:e.nom,variant:"outlined",component:u.b,to:"/eleves?eleveId=".concat(e.id),clickable:!0}}));return Object(A.a)(Object(A.a)({},e),{},{eleves:t,status:{color:e.is_abonne?"primary":"secondary",label:e.is_abonne?"Actif":"Non Actif"}})}));h(t),o(t),S(!1)}),(function(e){console.log(e),S(!1)})),G.getAllAbonnements({adminType:"manager"}).then((function(e){console.log(e);var t=e.abonnements.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{type:"3"===e.type[0]?"3 classes":"1"===e.type[0]?"1 classe":"Autre",owner:e.client.username,classesLabels:e.classes.map((function(e){return{label:e.codeCl}})),status:{color:e.is_abonne?"primary":"secondary",label:e.is_abonne?"Actif":"Expir\xe9"}})}));j(t),S(!1)}),(function(e){console.error("An Error occured when fetching abonnements :",e),S(!1)}))}),[]);return r.a.createElement(ct,{className:t.root,title:"Abonnements"},r.a.createElement(ze.a,{theme:nt},r.a.createElement(d.a,{maxWidth:"lg",className:t.container},r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(ze.a,{theme:Qa},r.a.createElement(Y.a,{item:!0,container:!0,className:"".concat(t.grid),xs:12},r.a.createElement(Y.a,{item:!0,xs:12,sm:12},r.a.createElement(I,{component:r.a.createElement(Ye.a,{className:a},r.a.createElement(la,{tableTitle:"Liste des derniers abonnements",headCells:Da,rows:v,indexName:"code_achat",withStartCheckbox:!0,withActions:!1,innerTheme:it})),controller:w})))),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(P.a,{mt:3},r.a.createElement(Aa.a,null,r.a.createElement(La.a,null,r.a.createElement(P.a,{maxWidth:500},r.a.createElement(f.a,{fullWidth:!0,InputProps:{startAdornment:r.a.createElement(Tt.a,{position:"start"},r.a.createElement(kt.a,{fontSize:"small",color:"action"},r.a.createElement(Dt.a,null)))},placeholder:"Rechercher un abonn\xe9 ...",variant:"outlined",onChange:function(e){return function(e){if(e.target.value.length<4)h(c);else{var t=e.target.value;h(c.filter((function(e){return e.nom&&-1!==e.nom.indexOf(t)||e.prenom&&-1!==e.prenom.indexOf(t)})))}}(e)}})))))),r.a.createElement(ze.a,{theme:Qa},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(I,{component:r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(la,{tableTitle:"Tous les abonn\xe9es",headCells:Fa,rows:b,indexName:"id",withActions:!0,actionButtons:Ja,innerTheme:it})),controller:w})))))))}var Ka=a(288),Ya=a.n(Ka),Za=Object(w.a)((function(e){return{button:{margin:e.spacing(1),color:"white"}}}));function en(e){var t=Za(),a=_a.map((function(e){return e.label})),i=Object(n.useState)([]),l=Object(m.a)(i,2),c=l[0],o=l[1],s=Object(n.useState)(!1),u=Object(m.a)(s,2),p=u[0],g=u[1];return Object(n.useEffect)((function(){g(!0),G.getAllEleves({adminType:"manager"}).then((function(e){console.log(e),o(e.eleves.map((function(e){return _a.map((function(t){return"classe"===t.id?e.classe.codeCl:e[t.id]}))}))),g(!1)}),(function(e){g(!1)}))}),[]),r.a.createElement(ct,{className:t.root,title:"Eleves"},r.a.createElement(ze.a,{theme:nt},r.a.createElement(d.a,{maxWidth:"lg",className:t.container},r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(I,{component:r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(Ya.a,{title:"Liste des \xe9l\xe8ves",data:c,columns:a,options:{filterType:"checkbox"}})),controller:p}))))))}var tn=a(902),an=a(903),nn=a(294),rn=a.n(nn),ln=a(295),cn=a.n(ln),on=a(90),sn=a.n(on),un=Object(Me.a)({palette:{primary:{main:"#536DFE",light:sn()("#536DFE").lighten(7.5).toHexString(),dark:sn()("#536DFE").darken(15).toHexString()},secondary:{main:"#FF5C93",light:sn()("#FF5C93").lighten(7.5).toHexString(),dark:sn()("#FF5C93").darken(15).toHexString(),contrastText:"#FFFFFF"},warning:{main:"#FFC260",light:sn()("#FFC260").lighten(7.5).toHexString(),dark:sn()("#FFC260").darken(15).toHexString()},success:{main:"#3CD4A0",light:sn()("#3CD4A0").lighten(7.5).toHexString(),dark:sn()("#3CD4A0").darken(15).toHexString()},info:{main:"#9013FE",light:sn()("#9013FE").lighten(7.5).toHexString(),dark:sn()("#9013FE").darken(15).toHexString()},text:{primary:"#4A4A4A",secondary:"#6E6E6E",hint:"#B9B9B9"},background:{default:"#F6F7FF",light:"#F3F5FF"}},customShadows:{widget:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetDark:"0px 3px 18px 0px #4558A3B3, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A",widgetWide:"0px 12px 33px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"},overrides:{MuiBackdrop:{root:{backgroundColor:"#4A4A4A1A"}},MuiMenu:{paper:{boxShadow:"0px 3px 11px 0px #E8EAFC, 0 3px 3px -2px #B2B2B21A, 0 1px 8px 0 #9A9A9A1A"}},MuiSelect:{icon:{color:"#B9B9B9"}},MuiListItem:{root:{"&$selected":{backgroundColor:"#F3F5FF !important","&:focus":{backgroundColor:"#F3F5FF"}}},button:{"&:hover, &:focus":{backgroundColor:"#F3F5FF"}}},MuiTouchRipple:{child:{backgroundColor:"white"}},MuiTableRow:{root:{height:56}},MuiTableCell:{root:{borderBottom:"1px solid rgba(224, 224, 224, .5)"},head:{fontSize:"0.95rem"},body:{fontSize:"0.95rem"}}}}),mn=Object(w.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},card:{padding:e.spacing(2)},avatar:{height:100,width:100,color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main}}})),dn=oa.c({nom:oa.d().max(20,"Le nom de famille ne doit pas d\xe9passer 20 caract\xe8res").required("Champs Obligatoire"),prenom:oa.d().max(50,"Le pr\xe9nom ne doit pas d\xe9passer 50 caract\xe8res").required("Champs Obligatoire"),email:oa.d().email("Adresse Email invalide").required("Champs Obligatoire"),phone:oa.d().trim().matches(/^0[5679]\d{8}$/,"Num\xe9ro de t\xe9lephone invalide").required("Champs Obligatoire"),newpassword:oa.d(),currentpassword:oa.d().test("passwords-match","Vous devez saisir le mot de passe actuel",(function(e){return!this.parent.newpassword||""===this.parent.newpassword||""!==this.parent.newpassword&&e&&""!==e}))}),pn={type:"input",props:{name:"nom",required:!0,type:"text",label:"Nom"}},gn={type:"input",props:{name:"prenom",required:!0,type:"text",label:"Prenom"}},bn={type:"input",props:{name:"email",required:!0,type:"email",label:"Email"}},fn={type:"input",props:{name:"phone",required:!0,type:"tel",label:"T\xe9lephone"}},hn=function(e){return{endAdornment:r.a.createElement(Tt.a,{position:"end"},r.a.createElement(ce.a,{"aria-label":"toggle password visibility",onClick:e.handleClickShowPassword},e.showPassword?r.a.createElement(rn.a,null):r.a.createElement(cn.a,null)))}},En=Object(c.b)((function(e){return{user:e.adminReducer.user}}),(function(e){return{updateProfile:function(t){return e(V.updateProfile(t))}}}))((function(e){e.className;var t=e.cardProps,a=Object(o.a)(e,["className","cardProps"]),i=mn(),l=a.user,c=Object(n.useState)(!1),s=Object(m.a)(c,2),u=s[0],p=s[1],g=Object(n.useState)(Object(A.a)(Object(A.a)({},l),{},{newpassword:"",currentpassword:""})),b=Object(m.a)(g,2),f=b[0],h=b[1],E=Object(n.useState)(!1),v=Object(m.a)(E,2),O=v[0],x=v[1],w=Object(n.useState)(!1),S=Object(m.a)(w,2),C=S[0],T=S[1],P=Object(n.useState)(!1),N=Object(m.a)(P,2),q=N[0],L=N[1],R=Object(n.useState)({severity:"success",message:"Profile mis \xe0 jours avec succ\xe8s"}),F=Object(m.a)(R,2),D=F[0],B=F[1],_=r.a.createElement(j.a,{variant:"filled",severity:D.severity},D.message);pn.props.value=f.nom,gn.props.value=f.prenom,bn.props.value=f.email,fn.props.value=f.phone;var H=function(e){"currentpassword"===e&&x(!O),"newpassword"===e&&T(!C)},U={type:"input",props:{name:"currentpassword",type:O?"text":"password",label:"Mot de passe actuel",InputProps:hn({showPassword:O,handleClickShowPassword:function(e){return H("currentpassword")}})}},W={type:"input",props:{name:"newpassword",type:C?"text":"password",label:"Nouveau mot de passe",InputProps:hn({showPassword:C,handleClickShowPassword:function(e){return H("newpassword")}})}},M=[[pn,gn],[bn,fn],[U,W]];return r.a.createElement(ct,{className:i.root,title:"Compte"},r.a.createElement(d.a,{maxWidth:"lg"},r.a.createElement(k,{open:q,onClose:function(){return L(!1)},autoHideDuration:6e3,children:_}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,lg:4,md:6,xs:12},r.a.createElement(Aa.a,t,r.a.createElement(La.a,null,r.a.createElement(De,{firstname:l.nom,lastname:l.prenom,avatar:f.imgFile&&f.imgFile.data||l.image,descriptionTitle:l.jobTitle,classes:i})),r.a.createElement(qe.a,null),r.a.createElement(tn.a,null,r.a.createElement("input",{type:"file",id:"profilePicture",name:"profilePicture",hidden:!0,accept:"image/png, image/jpeg",onChange:function(e){var t=e.currentTarget.files[0],a=new FileReader;a.onload=function(){var e={file:t,data:a.result,isUploading:!1},n=Object(A.a)(Object(A.a)({},f),{},{imgFile:e});h(n)},a.onerror=function(){console.log("Une est s'est produite lors de chargement de l'image depuis le disque")},a.readAsDataURL(t)}}),r.a.createElement(y.a,{component:"label",htmlFor:"profilePicture",color:"primary",fullWidth:!0,variant:"text"},"Modifier votre avatar")))),r.a.createElement(Y.a,{item:!0,lg:8,md:6,xs:12},r.a.createElement(Aa.a,null,r.a.createElement(an.a,{subheader:"Vous pouvez modifier vos informations",title:"Param\xe8tres du profile"}),r.a.createElement(qe.a,null),r.a.createElement(ze.a,{theme:un},r.a.createElement(I,{component:r.a.createElement(da,{validationSchema:dn,fieldsHiearchy:M,initialState:f,onChange:function(e){h(Object(A.a)(Object(A.a)({},f),{},Object(ne.a)({},e.target.name,e.target.value)))},onSubmit:function(e){var t=Object.assign.apply(Object,[{}].concat(Object(ca.a)(Object.keys(l).map((function(t){return e[t]&&l[t]!==e[t]&&""!==e[t]?Object(ne.a)({},t,e[t]):void 0})).filter((function(e){return!("undefined"===typeof e)})))));f.imgFile&&(t.image=f.imgFile.file),e.currentpassword&&e.newpassword&&(t.oldPassword=e.currentpassword,t.newPassword=e.newpassword),console.log(t),Object.keys(t).length&&(t.id=l.id,p(!0),a.updateProfile(Object(A.a)(Object(A.a)({},t),{},{adminType:"manager",id:l.id})).then((function(e){B({severity:"success",message:"Profile mis \xe0 jours avec succ\xe8s"}),L(!0),p(!1)}),(function(e){B({severity:"error",message:"Une erreur s'est produite ".concat(e.message?e.message:"")}),L(!0),p(!1)})))},submitLabel:"Mettre \xe0 jours"}),controller:u})))))))})),yn=a(904),vn=a(909),jn=a(910),On=a(905);var xn=function(e){var t=e.name,a=e.inputValue,i=e.id,l=e.btnColor,c=e.btnLabel,s=e.btnSize,u=e.setParentInput,d=(e.clickhandler,e.handleProgress,e.withProgress),p=Object(o.a)(e,["name","inputValue","id","btnColor","btnLabel","btnSize","setParentInput","clickhandler","handleProgress","withProgress"]),g=Object(n.useState)(null),f=Object(m.a)(g,2),h=f[0],E=f[1];return r.a.createElement(P.a,{display:"flex",flexDirection:"column",width:"100%"},d&&r.a.createElement(P.a,{display:"flex",alignItems:"center"},r.a.createElement(P.a,{width:"100%",mr:1},r.a.createElement(On.a,Object.assign({variant:"determinate",color:l||"primary"},p))),r.a.createElement(P.a,{minWidth:35},r.a.createElement(b.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(p.value),"%")))),r.a.createElement(P.a,{display:"flex",alignSelf:"center",alignItems:"center",justifyContent:"center"},r.a.createElement("label",{style:{textAlign:"center",width:"100%"}},r.a.createElement("input",Object.assign({},p.inputProps,{style:{display:"none"},id:i||t,name:t,type:"file",ref:function(e){return E(e)},value:a||"",onChange:function(e){return function(e){var t=e.currentTarget.files[0];console.log("Current value of file input : ",e.currentTarget.value);var a=new FileReader;a.onload=function(){var e={file:t,data:a.result,isUploading:!1,progress:0};console.log("File object assigned"),u(e)},a.onabort=function(){alert("Reading Aborted")},a.onerror=function(){console.log("Error occuren when Uploading file from disk")},a.readAsDataURL(t)}(e)},onClick:function(e){return console.log(e.target.value)}})),r.a.createElement(Ze.a,{color:l||"primary",size:s||"small","aria-label":"add",variant:"extended",onClick:function(e){return h.click()}},c))))},wn=Object(w.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},card:{padding:e.spacing(2)},avatar:{height:200,width:200},previewBox:{minHeight:200,minWidth:200},thumbnail:{maxHeight:60,maxWidth:60}}})),Sn=oa.c({titre:oa.d().max(50,"Le titre ne doit pas d\xe9passer 20 caract\xe8res").required("Champs Obligatoire"),sponsor:oa.d().max(50,"Le nom de la compagnie ne doit pas d\xe9passer 50 caract\xe8res").required("Champs Obligatoire"),type:oa.d().required("Champs Obligatoire")}),Cn=function(e){e.className;var t=e.cardProps,a=e.oldPubProps,i=(Object(o.a)(e,["className","cardProps","oldPubProps"]),wn()),l=Object(n.useState)({titre:a.titre,sponsor:a.sponsor,type:a.type}),c=Object(m.a)(l,2),s=c[0],u=c[1],p=Object(n.useState)(0),g=Object(m.a)(p,2),f=g[0],h=g[1],E=Object(n.useState)(""),y=Object(m.a)(E,2),v=y[0],O=y[1],x=Object(n.useState)(null),w=Object(m.a)(x,2),S=w[0],C=w[1],T=Object(n.useState)(!1),N=Object(m.a)(T,2),q=N[0],I=N[1],L=Object(n.useState)({severity:"success",message:"Annonce mise \xe0 jours avec succ\xe8s"}),R=Object(m.a)(L,2),F=R[0],D=R[1],B=[[{type:"input",props:{name:"titre",required:!0,type:"text",label:"Titre de l'annonce",value:s.titre}},{type:"input",props:{name:"sponsor",required:!0,type:"text",label:"Compagnie",value:s.sponsor}}],[{type:"select",props:{name:"type",required:!0,select:!0,label:"Type de la bani\xe8re publicitaire",value:s.type},children:[{key:1,value:1,label:"Type 1 : Petite annonce lat\xe9rale"},{key:2,value:2,label:"Type 2 : Large annonce en bas"},{key:3,value:3,label:"Type 3 : Large annonce libre"}]}]],_=function(){var e={};Object.keys(s).forEach((function(t){s[t]!==a[t]&&(e[t]=s[t])})),S&&null!==S&&(e.image=S.file,C(Object(A.a)(Object(A.a)({},S),{},{isUploading:!0,progress:0}))),e.id=a._id,G.updatePub(Object(A.a)(Object(A.a)({},e),{},{adminType:"manager"}),{onUploadProgress:function(e){h(e.loaded/e.total*100)}}).then((function(e){console.log("Server result : ".concat(e)),console.log("File successfullly uploaded."),setTimeout((function(){h(0)}),3e3),D({severity:"success",message:"Annonce mise \xe0 jours avec succ\xe8s"}),I(!0),h(0),u({titre:"",sponsor:"",type:"type1"}),C(null),O("")}),(function(e){console.log(e),D({severity:"error",message:"Une erreur s'est produite ".concat(e.message?e.message:e)}),I(!0)}))};return r.a.createElement(d.a,{maxWidth:"lg"},r.a.createElement(k,{open:q,onClose:function(){return I(!1)},autoHideDuration:6e3,children:r.a.createElement(j.a,{variant:"filled",severity:F.severity},F.message)}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,lg:4,md:6,xs:12},r.a.createElement(Aa.a,t,r.a.createElement(La.a,null,r.a.createElement(P.a,{justifyContent:"center",alignItems:"center",display:"flex"},r.a.createElement(yn.a,{image:"assets/Dummy/Avatars/avatar_4.png"},r.a.createElement(P.a,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",bgcolor:"lightgrey",className:i.previewBox},r.a.createElement(b.a,{align:"center",variant:"h6",color:"textSecondary"},1===s.type&&"Type 1",2===s.type&&"Type 2",3===s.type&&"Type 3"),r.a.createElement(b.a,{align:"center",variant:"h5",color:"textSecondary"},1===s.type&&"365 X 720",2===s.type&&"480 X 844",3===s.type&&"560 X 1024"))))),r.a.createElement(qe.a,null),r.a.createElement(tn.a,null,r.a.createElement(xn,{name:"upload-ad-image-input",inputValue:v,btnLabel:"Charger la photo de l'annonce",setParentInput:function(e){console.log(e.file.name),C(e)},withProgress:!0,value:f})))),r.a.createElement(Y.a,{item:!0,lg:8,md:6,xs:12},r.a.createElement(Aa.a,null,r.a.createElement(an.a,{subheader:"Modifiez les champs souhait\xe9s",title:"Editer l'annonce"}),r.a.createElement(qe.a,null),r.a.createElement(ze.a,{theme:un},r.a.createElement(da,{validationSchema:Sn,fieldsHiearchy:B,initialState:s,onChange:function(e){u(Object(A.a)(Object(A.a)({},s),{},Object(ne.a)({},e.target.name,e.target.value)))},onSubmit:function(e){_(),console.log(e)},submitLabel:"Mettre \xe0 jours"}))))))},Tn=Object(w.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},card:{padding:e.spacing(2)},avatar:{height:200,width:200},previewBox:{minHeight:200,minWidth:200},thumbnail:{maxHeight:60,maxWidth:60}}})),kn=oa.c({titre:oa.d().max(50,"Le titre ne doit pas d\xe9passer 20 caract\xe8res").required("Champs Obligatoire"),sponsor:oa.d().max(50,"Le nom de la compagnie ne doit pas d\xe9passer 50 caract\xe8res").required("Champs Obligatoire"),type:oa.d().required("Champs Obligatoire")}),Pn=function(e){var t=e.className,a=e.cardProps,i=Object(o.a)(e,["className","cardProps"]),l=Tn(),c=Object(n.useState)([]),s=Object(m.a)(c,2),u=s[0],p=s[1],g=Object(n.useState)([]),f=Object(m.a)(g,2),h=f[0],E=f[1],y=Object(n.useState)(!1),v=Object(m.a)(y,2),O=v[0],x=v[1],w=[{label:"Annuler",clickHandler:function(e){x(!1)}}],S={titre:"",sponsor:"",type:1},C=Object(n.useState)(S),T=Object(m.a)(C,2),N=T[0],q=T[1],I=Object(n.useState)(S),L=Object(m.a)(I,2),R=L[0],F=L[1],D=Object(n.useState)(0),B=Object(m.a)(D,2),_=B[0],H=B[1],U=Object(n.useState)(""),W=Object(m.a)(U,2),M=W[0],z=W[1],V=Object(n.useState)(null),J=Object(m.a)(V,2),Q=J[0],X=J[1],$=Object(n.useState)(!1),K=Object(m.a)($,2),Z=K[0],ee=K[1],te=Object(n.useState)({severity:"success",message:"Annonce ajout\xe9e avec succ\xe8s"}),ae=Object(m.a)(te,2),re=ae[0],ie=ae[1],le={type:"input",props:{name:"titre",required:!0,type:"text",label:"Titre de l'annonce",value:N.titre}},oe={type:"input",props:{name:"sponsor",required:!0,type:"text",label:"Compagnie",value:N.sponsor}},se={type:"select",props:{name:"type",required:!0,select:!0,label:"Type de la bani\xe8re publicitaire",value:N.type},children:[{key:1,value:1,label:"Type 1 : Petite annonce lat\xe9rale"},{key:2,value:2,label:"Type 2 : Large annonce en bas"},{key:3,value:3,label:"Type 3 : Large annonce libre"}]};Object(n.useEffect)((function(){G.getAllPubs({adminType:"manager"}).then((function(e){E(e.pubs)}),(function(e){console.log("Error when fetching all pubs : ",e)}))}),[]),Object(n.useEffect)((function(){console.log(h),h!==[]&&p(h.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{thumbnail:r.a.createElement(Ye.a,{variant:"outlined"},r.a.createElement("img",{src:e.image,alt:"Lien d'annonce bris\xe9",className:l.thumbnail})),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{title:"Modifier",color:"primary",onClick:function(t){return a=e._id,F(h.find((function(e){return e._id===a}))),void x(!0);var a}},r.a.createElement(vn.a,null)),r.a.createElement(ce.a,{title:"Supprimer",color:"secondary",onClick:function(t){return a=e._id,void G.deletePub({id:a,adminType:"manager"}).then((function(e){ie({severity:"success",message:"Annonce supprim\xe9e avec succ\xe8s"}),ee(!0)}),(function(e){console.log(e),ie({severity:"error",message:"Une erreur s'est produite ".concat(e.message?e.message:e)}),ee(!0)}));var a}},r.a.createElement(jn.a,null)))})})))}),[h]);var ue=[[le,oe],[se]],me=function(){console.log("Updating..."),X(Object(A.a)(Object(A.a)({},Q),{},{isUploading:!0,progress:0})),G.addPub(Object(A.a)(Object(A.a)({},N),{},{image:Q.file,adminType:"manager"}),{onUploadProgress:function(e){H(e.loaded/e.total*100)}}).then((function(e){console.log("Server result : ".concat(e)),console.log("File successfullly uploaded."),setTimeout((function(){H(0)}),3e3),ie({severity:"success",message:"Annonce ajout\xe9e avec succ\xe8s"}),ee(!0),H(0),q({titre:"",sponsor:"",type:"type1"}),X(null),z("")}),(function(e){console.log(e),ie({severity:"error",message:"Une erreur s'est produite ".concat(e.message?e.message:e)}),ee(!0)}))};return r.a.createElement(ct,{className:l.root,title:"Espace Publicit\xe9s"},r.a.createElement(d.a,{maxWidth:"lg"},r.a.createElement(k,{open:Z,onClose:function(){return ee(!1)},autoHideDuration:6e3,children:r.a.createElement(j.a,{variant:"filled",severity:re.severity},re.message)}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ye.a,null,r.a.createElement(la,{tableTitle:"Tables des annonces",headCells:Ha,rows:u,indexName:"_id",withStartCheckbox:!0,handleRowSelected:function(e,t,a){},withActions:!1})))),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,lg:4,md:6,xs:12},r.a.createElement(Aa.a,a,r.a.createElement(La.a,null,r.a.createElement(P.a,{justifyContent:"center",alignItems:"center",display:"flex"},r.a.createElement(yn.a,{image:"assets/Dummy/Avatars/avatar_4.png"},r.a.createElement(P.a,{justifyContent:"center",alignItems:"center",display:"flex",flexDirection:"column",bgcolor:"lightgrey",className:l.previewBox},r.a.createElement(b.a,{align:"center",variant:"h6",color:"textSecondary"},1===N.type&&"Type 1",2===N.type&&"Type 2",3===N.type&&"Type 3"),r.a.createElement(b.a,{align:"center",variant:"h5",color:"textSecondary"},1===N.type&&"365 X 720",2===N.type&&"480 X 844",3===N.type&&"560 X 1024"))))),r.a.createElement(qe.a,null),r.a.createElement(tn.a,null,r.a.createElement(xn,{name:"upload-ad-image-input",inputValue:M,btnLabel:"Charger la photo de l'annonce",setParentInput:function(e){console.log(e.file.name),X(e)},withProgress:!0,value:_})))),r.a.createElement(Y.a,{item:!0,lg:8,md:6,xs:12},r.a.createElement(Aa.a,null,r.a.createElement(an.a,{subheader:"Veuillez remplir les champs indiqu\xe9s",title:"Ajouter une nouvelle annonce"}),r.a.createElement(qe.a,null),r.a.createElement(ze.a,{theme:un},r.a.createElement(da,{validationSchema:kn,fieldsHiearchy:ue,initialState:N,onChange:function(e){console.log(u),q(Object(A.a)(Object(A.a)({},N),{},Object(ne.a)({},e.target.name,e.target.value)))},onSubmit:function(e){me(),console.log(e)},submitLabel:"Ajouter"}))))),r.a.createElement(Y.a,{container:!0},r.a.createElement(Ia,{open:O,title:"Edition de publicit\xe9",body:r.a.createElement(Cn,Object.assign({className:t,cardProps:a,oldPubProps:R},i)),actions:w,handleClose:function(e){return x(!1)}}))))},Nn=a(217),qn=a(32);var In=function(e){var t=e.chartData;return r.a.createElement(Ye.a,null,r.a.createElement(P.a,{display:"flex",flexDirection:"row",justifyContent:"center"},r.a.createElement(b.a,{variant:"caption",color:"textSecondary",align:"center"},e.title)),r.a.createElement(Nn.c,{data:t},r.a.createElement(Nn.a,null),r.a.createElement(Nn.d,null),r.a.createElement(Nn.b,{valueField:e.yName,argumentField:e.xName}),r.a.createElement(qn.a,null)))},An=a(109),Ln=["#003f5c","#2f4b7c","#665191","#a05195","#d45087","#f95d6a","#ff7c43","#ffa600"],Rn=Math.PI/180,Fn=function(e){var t=e.cx,a=e.cy,n=e.midAngle,i=e.innerRadius,l=e.outerRadius,c=e.percent;e.index;console.log("kjghdsfgkjshdfkgjsfdhj");var o=i+.5*(l-i),s=t+o*Math.cos(-n*Rn),u=a+o*Math.sin(-n*Rn);return r.a.createElement("text",{x:s,y:u,fill:"white",textAnchor:s>t?"start":"end",dominantBaseline:"central"},"".concat((100*c).toFixed(0),"%"))},Dn=function(e){var t=e.active,a=e.payload;e.label;return t?r.a.createElement(P.a,{bgcolor:"black",borderRadius:"10px",px:2,display:"flex",flexDirection:"row",justifyContent:"center"},r.a.createElement("p",{style:{color:"white"}},"".concat(a[0].name," : ").concat(a[0].value))):null};var Bn=function(e){var t=e.chartData.map((function(e){return{name:e._id,value:e.count}}));return r.a.createElement(Ye.a,null,r.a.createElement(P.a,{display:"flex",flexDirection:"row",justifyContent:"center"},r.a.createElement(b.a,{variant:"caption",color:"textSecondary",align:"center"},e.title)),r.a.createElement(P.a,{display:"flex",flexDirection:"row",justifyContent:"center",justifyItems:"center"},r.a.createElement(An.e,{width:520,height:320},r.a.createElement(An.d,{isAnimationActive:!1,data:t,cx:250,cy:160,labelLine:!1,label:Fn,outerRadius:120,fill:"#8884d8",dataKey:"value"},t.map((function(e,t){return r.a.createElement(An.a,{key:"cell-".concat(t),fill:Ln[t%Ln.length]})}))),r.a.createElement(An.f,{content:r.a.createElement(Dn,null)}))))};var _n=function(e){var t=e.data;return r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:"100%"},r.a.createElement(I,{controller:e.isLoading,component:r.a.createElement(Bn,{chartData:t.elevesBySexe,labelsTitle:"Sexe",valuesTitles:"Nombre",valuesName:"count",labelsName:"_id",title:"Distribution du genre des \xe9l\xe8ves"})}))),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:"100%"},r.a.createElement(I,{controller:e.isLoading,component:r.a.createElement(In,{chartData:t.elevesByAge,xName:"_id",yName:"count",xTitle:"Age",yTitle:"Nombre",title:"R\xe9partition d'\xe2ge des \xe9l\xe8ves"})}))))};var Hn=function(e){var t=e.data;return r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:"100%"},r.a.createElement(I,{controller:e.isLoading,component:r.a.createElement(Bn,{chartData:t,labelsTitle:"Wilaya",valuesTitles:"Nombre",valuesName:"count",labelsName:"_id",title:"R\xe9partition g\xe9ographique des enseignants"})}))},Un=["#941191","#a34e8b","#c69464","#e9da3c","#d2dc6c","#bade9c","#8ae1fc","#48b8d0"],Wn=function(e){var t=e.active,a=e.payload;e.label;return t?r.a.createElement(P.a,{bgcolor:"black",borderRadius:"10px",px:2,display:"flex",justifyContent:"center"},r.a.createElement("p",{style:{color:"white"}},"".concat(a[0].name," : ").concat(a[0].value))):null};var Mn=function(e){var t=e.chartData.map((function(e,t){return{name:e._id,value:e.count,fill:Un[t%Un.length]}}));return r.a.createElement(Ye.a,null,r.a.createElement(P.a,{display:"flex",flexDirection:"row",justifyContent:"center"},r.a.createElement(b.a,{variant:"caption",color:"textSecondary",align:"center"},e.title)),r.a.createElement(P.a,{display:"flex",flexDirection:"row",justifyContent:"center"},r.a.createElement(An.c,{height:280,width:320},r.a.createElement(An.f,{content:r.a.createElement(Wn,null)}),r.a.createElement(An.b,{dataKey:"value",data:t,isAnimationActive:!0}))))};var zn=function(e){var t=e.data&&e.data.map((function(e){return{_id:"".concat(e.nom," ").concat(e.prenom),count:e.count}})).sort((function(e,t){return t.count-e.count}));return r.a.createElement("div",null,r.a.createElement(I,{controller:e.isLoading,component:r.a.createElement(Mn,{title:"Classes enseign\xe9es par les enseignants",chartData:t})}))},Gn=a(914),Vn=a(915),Jn=a(916),Qn=Object(w.a)((function(e){return{redBg:{backgroundColor:e.palette.secondary.main,color:"white",borderRadius:"50%",padding:e.spacing(2),fontSize:60},blueBg:{backgroundColor:e.palette.primary.main,color:"white",borderRadius:"50%",padding:e.spacing(2),fontSize:60},greenBg:{backgroundColor:e.palette.success.main,color:"white",borderRadius:"50%",padding:e.spacing(2),fontSize:60}}}));var Xn=function(e){var t=Qn();return r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(b.a,{variant:"h5",color:"textSecondary"},"Quelques chiffres")),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(Ye.a,{height:"100%",width:"100%"},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:12,sm:9},r.a.createElement(P.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",p:5},r.a.createElement(P.a,{display:"flex",justifyContent:"center"},r.a.createElement(b.a,{variant:"h6",color:"textSecondary",align:"center"},"Total enseignants")),r.a.createElement(P.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(b.a,{variant:"h4",color:"primary"},"4454")))),r.a.createElement(Y.a,{item:!0,xs:12,sm:3},r.a.createElement(P.a,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}," ",r.a.createElement(Gn.a,{className:t.redBg,color:"secondary",fontSize:"large"})))))),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(Ye.a,{height:"100%",width:"100%"},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:12,sm:9},r.a.createElement(P.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",p:5},r.a.createElement(P.a,{display:"flex",justifyContent:"center"},r.a.createElement(b.a,{variant:"h6",color:"textSecondary",align:"center"},"Nombre d'\xe9l\xe8ves")),r.a.createElement(P.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(b.a,{variant:"h4",color:"primary"},"4454")))),r.a.createElement(Y.a,{item:!0,xs:12,sm:3},r.a.createElement(P.a,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}," ",r.a.createElement(Vn.a,{className:t.blueBg,fontSize:"large"})))))),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(Ye.a,{height:"100%",width:"100%"},r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:12,sm:9},r.a.createElement(P.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",p:5},r.a.createElement(P.a,{display:"flex",justifyContent:"center"},r.a.createElement(b.a,{variant:"h6",color:"textSecondary",align:"center"},"Total des abonnements")),r.a.createElement(P.a,{display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(b.a,{variant:"h4",color:"primary"},"4454")))),r.a.createElement(Y.a,{item:!0,xs:12,sm:3},r.a.createElement(P.a,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}," ",r.a.createElement(Jn.a,{className:t.greenBg,fontSize:"large"})))))))},$n=Object(w.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)}}}));var Kn=function(e){var t=$n();Object(n.useEffect)((function(){G.getProfsStatistics({adminType:"manager"}).then((function(e){console.log(e),E(e),c(!1)}),(function(e){})),G.getElevesStatistics({adminType:"manager"}).then((function(e){console.log(e),O(e),p(!1)}),(function(e){}))}),[]);var a=Object(n.useState)(!0),i=Object(m.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)(!0),s=Object(m.a)(o,2),u=s[0],p=s[1],g=Object(n.useState)({profsByWilaya:[],classesByprof:[]}),f=Object(m.a)(g,2),h=f[0],E=f[1],y=Object(n.useState)({elevesByAge:[],elevesBySexe:[]}),v=Object(m.a)(y,2),j=v[0],O=v[1];return r.a.createElement(ct,{className:t.root,title:"Statistiques"},r.a.createElement(d.a,null,r.a.createElement(Xn,{summary:{}}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(b.a,{variant:"h5",color:"textSecondary"},"Enseignants")),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(Hn,{isLoading:l,data:h.profsByWilaya})),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(zn,{isLoading:l,data:h.classesByprof}))),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(b.a,{variant:"h6",color:"textPrimary"},"El\xe8ves")),r.a.createElement(Y.a,{item:!0,xs:12,sm:12},r.a.createElement(_n,{isLoading:u,data:j})))))},Yn=a(918),Zn=a(919),er=a(917),tr=a(920),ar=a(921),nr=a(922),rr=a(923),ir=a(848),lr=Object(w.a)((function(e){return{root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center"},active:{background:e.palette.secondary.light,boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{background:e.palette.primary.main},form:{margin:e.spacing(3)},submit:{margin:e.spacing(3,0,2)},sucess:{color:e.palette.success.light},error:{color:e.palette.error.light}}})),cr=Object(ja.a)((function(e){return{alternativeLabel:{top:22},active:{"& $line":{background:e.palette.primary.main}},completed:{"& $line":{background:e.palette.primary.main}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}}}))(ir.a),or=a(908),sr=a(906),ur=a(907);function mr(e){var t,a=e.icons,n=e.classes,i=Object(o.a)(e,["icons","classes"]),l=i.active,c=i.completed;return r.a.createElement("div",{className:Object(re.default)(n.root,(t={},Object(ne.a)(t,n.active,l),Object(ne.a)(t,n.completed,c),t))},a[String(i.icon)])}var dr=Object(w.a)((function(e){return{root:{width:"100%"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1),color:e.palette.success.contrastText}}}));function pr(e){var t=e.StepConnector,a=e.labelStepsIconsClasses,i=e.icons,l=e.steps,c=Object(o.a)(e,["StepConnector","labelStepsIconsClasses","icons","steps"]),s=dr(),u=Object(n.useState)(2),d=Object(m.a)(u,2),p=d[0],g=d[1],f=function(){(!c.nexHandler||c.nexHandler(p))&&g((function(e){return e+1}))};return r.a.createElement("div",{className:s.root},r.a.createElement(or.a,{alternativeLabel:!0,activeStep:p,connector:r.a.createElement(t,null)},l.map((function(e){return r.a.createElement(sr.a,{key:e.title},r.a.createElement(ur.a,{StepIconComponent:function(e){return r.a.createElement(mr,Object.assign({classes:a,icons:i},e))}},e.title))}))),r.a.createElement("div",null,p!==l.length&&l[p].children),r.a.createElement("div",null,p===l.length?r.a.createElement("div",null,!c.finalStep&&r.a.createElement(b.a,{className:s.instructions,align:"center"},"C'est fini ! Toutes les \xe9tapes sont accomplies"),c.finalStep&&c.finalStep,r.a.createElement(y.a,{onClick:function(){g(0)},className:s.button},"R\xe9initialiser")):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(y.a,Object.assign({disabled:0===p,onClick:function(){g((function(e){return e-1}))},className:s.button},c.backBtnIcon),"Pr\xe9c\xe9dent"),p!==l.length-1&&r.a.createElement(y.a,Object.assign({variant:"contained",color:"primary",onClick:f,className:s.button},c.nextBtnIcon),"Suivant"),p===l.length-1&&r.a.createElement(y.a,{variant:"contained",color:"primary",onClick:f,className:s.button},"Terminer")))))}pr.prototype={steps:st.a.array.isRequired,labelStepsIconsClasses:st.a.object.isRequired,icons:st.a.array.isRequired};var gr=pr,br=oa.c({titre:oa.d().min(5,"Le titre du cours doit contenir au minimum 5 caract\xe8res").max(70,"Le titre du cours ne doit pas d\xe9passer 70 caract\xe8res").required("Champs Obligatoire"),trimestre:oa.b().integer().oneOf([1,2,3]).required("Champs Obligatoire"),ordre:oa.b().integer().positive().required("Champs Obligatoire"),lien:oa.d().url("Le lien de la vid\xe9o est invalide").matches(/https:\/\/vimeo.com\/\d{8,}(?=\b|\/)/,"L'URL de la vid\xe9o semble invalide").required("Champs Obligatoire"),thumbnail:oa.d().url("Le lien de l'aper\xe7u la vid\xe9o est invalide").required("Champs Obligatoire")}),fr={type:"input",props:{name:"titre",required:!0,type:"text",label:"Titre du cours"}},hr={type:"select",props:{name:"trimestre",required:!0,select:!0,label:"Trimestre"},children:[1,2,3].map((function(e){return{key:e,value:e,label:e}}))},Er={type:"input",props:{name:"lien",required:!0,type:"text",label:"URL de la vid\xe9o"}},yr={type:"input",props:{name:"thumbnail",required:!0,type:"text",label:"URL de l'aper\xe7u de la vid\xe9o"}};var vr=Object(c.b)((function(e){return{user:e.adminReducer.user}}),(function(e){return{}}))((function(e){var t=e.classes,a=Object(n.useRef)();Object(n.useEffect)((function(){e.linkRefHandle&&e.linkRefHandle(a,0)}),[a]);var i={titre:e.state.titre,trimestre:e.state.trimestre,ordre:e.state.ordre,lien:e.state.lien,thumbnail:e.state.thumbnail},l=Object(n.useState)(Object(A.a)({},i)),c=Object(m.a)(l,2),o=c[0],s=c[1],u=Object(n.useState)(!1),g=Object(m.a)(u,2),h=g[0],E=g[1];e.withTitle&&(fr.props.value=o.titre),Er.props.value=o.lien,hr.props.value=o.trimestre,yr.props.value=o.thumbnail;var v=Object(n.useState)([]),j=Object(m.a)(v,2),O=j[0],x=j[1];return Object(n.useEffect)((function(){J.getProfCourses({adminType:"enseignant",id:e.user._id}).then((function(t){console.log(t);var a=t.courses.filter((function(t){return t.classe===e.currentClasse}));e.withTitle;x((e.withTitle?[[fr]]:[]).concat([[hr,{type:"select",props:{name:"ordre",required:!0,select:!0,label:"Ce cours est plac\xe9 apr\xe8s",value:a.length?a[0].ordre:0},children:a.map((function(e){return{key:e._id,value:e.ordre,label:e.titre}}))}],[Er],[yr]]))}),(function(e){console.log("an error occured when fetching courses of the professor: ",e)}))}),[]),r.a.createElement(d.a,{component:"main",maxWidth:"xl"},r.a.createElement(p.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Ajouter la vid\xe9o du cours"),r.a.createElement(Ye.a,null,r.a.createElement(ua.a,{initialValues:o,validationSchema:br,onSubmit:function(t){s(Object(A.a)(Object(A.a)({},o),t)),e.submitHandler(t,0)}},(function(n){var i=n.errors,l=n.handleBlur,c=n.handleChange,u=n.handleSubmit,m=(n.isSubmitting,n.touched);n.values;return r.a.createElement("form",{className:t.form,onSubmit:u},r.a.createElement(Y.a,{container:!0,spacing:2},O.map((function(t,a){return t.map((function(n,u){return r.a.createElement(Y.a,{item:!0,xs:12,sm:Math.floor(12/t.length),key:"".concat(a,"-").concat(u)},"input"===n.type&&r.a.createElement(f.a,Object.assign({key:n.props.name,error:Boolean(m[n.props.name]&&i[n.props.name]),helperText:m[n.props.name]&&i[n.props.name],onBlur:l,onChange:function(t){var a;c(t),a=t,s(Object(A.a)(Object(A.a)({},o),{},Object(ne.a)({},a.target.name,a.target.value))),e.updateStepsStatus&&e.updateStepsStatus(0)},variant:"outlined",fullWidth:!0,id:"".concat(n.props.name,"-input")},n.props)),"select"===n.type&&r.a.createElement(f.a,Object.assign({error:Boolean(m[n.props.name]&&i[n.props.name]),helperText:m[n.props.name]&&i[n.props.name],onBlur:l,onChange:function(t){c(t),e.onChange&&e.onChange(t)},variant:"outlined",fullWidth:!0,id:"".concat(n.props.name,"-input")},n.props),n.children&&n.children.map((function(e,t){return r.a.createElement(sa.a,{key:e.key,value:e.value},e.label)}))))}))})),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(y.a,{color:"secondary",variant:"contained",onClick:function(){return E(!0)}}," Aper\xe7u")),r.a.createElement(Y.a,{item:!0,xs:12,sm:8},h&&r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("iframe",{title:"aper\xe7",src:o.lien.replace("vimeo.com","player.vimeo.com/video"),width:"240",height:"160",frameborder:"0",allow:"autoplay; fullscreen",allowfullscreen:!0})," ")))),r.a.createElement(Y.a,{container:!0,justify:"flex-end"},r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,style:{visibility:"hidden"},ref:a}))))})))))})),jr=oa.c({titrePdf:oa.d().min(5,"Le titre du document doit contenir au minimum 5 caract\xe8res").max(40,"Le titre du document ne doit pas d\xe9passer 40 caract\xe8res").required("Champs Obligatoire")}),Or={type:"input",props:{name:"titrePdf",required:!1,type:"text",label:"Titre de document"}},xr={type:"file",props:{name:"document",type:"file",accept:"application/pdf"}};var wr=function(e){var t=e.classes,a={titrePdf:""!==e.state.titrePdf?e.state.titrePdf:"",pdfFile:null!==e.state.pdfFile?e.state.pdfFile:null,DOC:null!==e.state.pdfFile?e.state.pdfFile.file.name:""},i=Object(n.createRef)(),l=Object(n.useState)(!1),c=Object(m.a)(l,2),o=c[0],s=c[1],u=Object(n.useState)(Object(A.a)({},a)),g=Object(m.a)(u,2),h=g[0],E=g[1];Or.props.value=h.titrePdf,xr.children=r.a.createElement(xn,{btnLabel:"Charger",btnColor:"primary",name:"document",inputProps:xr.props,value:0,setParentInput:function(e){return E(Object(A.a)(Object(A.a)({},h),{},{pdfFile:e,DOC:e.file.name}))}});var v=[[Or],[{type:"formControl",children:r.a.createElement(Y.a,{container:!0},r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement("label",{ref:i},"Choisissez le fichier")),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},xr.children))},{type:"formControl"}]],j=Object(n.useRef)();return Object(n.useEffect)((function(){e.linkRefHandle&&e.linkRefHandle(j,1)}),[j]),Object(n.useEffect)((function(){console.log("State updated on Resume",h)}),[h]),r.a.createElement(d.a,{component:"main",maxWidth:"xl"},r.a.createElement(p.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Associer un document au cours"),r.a.createElement(Ye.a,null,r.a.createElement(ua.a,{initialValues:h,validationSchema:jr,onSubmit:function(t){console.log(t),o&&null===h.pdfFile||e.submitHandler(Object(A.a)(Object(A.a)({},t),{},{pdfFile:h.pdfFile}),1)}},(function(a){var n=a.errors,l=a.handleBlur,c=a.handleChange,u=a.handleSubmit,m=(a.isSubmitting,a.touched);a.values;return r.a.createElement("form",{className:t.form,onSubmit:u},r.a.createElement(Y.a,{container:!0,spacing:2},v.map((function(t,a){return t.map((function(i,o){return r.a.createElement(Y.a,{item:!0,xs:12,sm:Math.floor(12/t.length),key:"".concat(a,"-").concat(o)},"input"===i.type&&r.a.createElement(f.a,Object.assign({key:i.props.name,error:Boolean(m[i.props.name]&&n[i.props.name]),helperText:m[i.props.name]&&n[i.props.name],onBlur:l,onChange:function(t){var a;c(t),"titrePdf"===(a=t).target.name&&""!==a.target.value&&s(!0),"titrePdf"===a.target.name&&""===a.target.value&&s(!1),E(Object(A.a)(Object(A.a)({},h),{},Object(ne.a)({},a.target.name,a.target.value))),e.updateStepsStatus&&e.updateStepsStatus(1)},variant:"outlined",fullWidth:!0,id:"".concat(i.props.name,"-input")},i.props)))}))})),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement("label",{ref:i,style:{color:o&&null===h.pdfFile?"red":"inherit"}},""!==h.DOC?h.DOC:"Choisissez un fichier")),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},xr.children)),r.a.createElement(Y.a,{container:!0,justify:"flex-end"},r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,style:{visibility:"hidden"},ref:j}))))})))))},Sr=a(926),Cr=a(453),Tr=Object(w.a)((function(e){return{button:{margin:e.spacing(2)},grid:{margin:e.spacing(2),padding:e.spacing(1)},paper:{padding:e.spacing(2),margin:e.spacing(3)},invalidQuestion:{backgroundColor:Ve.a[100]},typography:{fontWeight:"bold"},uploadLabel:{display:"inline-block",backgroundColor:"indigo",boxShadow:e.shadows[10],color:"white",padding:"0.5rem",cursor:"pointer"}}})),kr=oa.c({questionText:oa.d().min(5,"Le contenu de la question doit contenir au minimum 5 caract\xe8res"),answerText:oa.d()});var Pr=function(e){var t=Tr(),a=e.question,i=a.questionText,l=a.questionImg,c=a.answerText,o=a.answerImg,s=e.valid,u=Object(n.useState)({questionText:i,questionImg:l,answerText:c,answerImg:o}),p=Object(m.a)(u,2),g=p[0],E=p[1],y=Object(n.useState)(!1),v=Object(m.a)(y,2),j=v[0],O=v[1],x=Object(n.useState)(!1),w=Object(m.a)(x,2),S=w[0],C=w[1],T=function(t,a){var n=t.currentTarget.files[0],r=new FileReader;r.onload=function(){var t={file:n,data:r.result,isUploading:!1,progress:0},i=Object(A.a)(Object(A.a)({},g),{},Object(ne.a)({},a,t));E(i),e.updateState&&e.updateState(i)},r.onabort=function(){alert("Reading Aborted")},r.onerror=function(){console.log("Error occuren when Uploading file from disk")},r.readAsDataURL(n)},k=function(t){var a=Object(A.a)(Object(A.a)({},g),{},Object(ne.a)({},t.target.name,t.target.value));E(a),e.updateState&&e.updateState(a)};return r.a.createElement(d.a,null,r.a.createElement(Ye.a,{className:Object(re.default)(t.paper,!s&&t.invalidQuestion)},r.a.createElement(b.a,{variant:"body1"},"Question n \xb0 ",e.numQuestion),r.a.createElement(ua.a,{initialValues:{questionText:i,answerText:c},validationSchema:kr,onSubmit:function(e){}},(function(a){var n=a.errors,i=a.handleBlur,l=a.handleChange,c=a.handleSubmit,o=(a.isSubmitting,a.touched);a.values;return r.a.createElement("form",{className:t.form,onSubmit:c},r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(P.a,{display:"flex",flexDirection:"column",width:"100%"},r.a.createElement(d.a,null,r.a.createElement(P.a,{display:"flex",width:"100%"},r.a.createElement(P.a,{display:"flex",width:"50%",alignItems:"center"},r.a.createElement(b.a,{variant:"body1"},"Question")),r.a.createElement(P.a,{display:"flex",width:"50%"},r.a.createElement(Cr.a,{row:!0},r.a.createElement(h.a,{control:r.a.createElement(Jt.a,{checked:!j,onChange:function(){return O(!j)},name:"questTypeSwitch",color:"primary"}),label:j?"Image":"Textuelle"}))))),r.a.createElement(d.a,null,j&&r.a.createElement(d.a,null,r.a.createElement(P.a,{display:"flex",justifyContent:"flex-end",width:"100%"},r.a.createElement("input",{type:"file",id:"questionImg-".concat(e.numQuestion),name:"questionImg",hidden:!0,accept:"image/png, image/jpeg",onChange:function(e){return T(e,"questionImg")}}),r.a.createElement("label",{htmlFor:"questionImg-".concat(e.numQuestion),className:t.uploadLabel},"Charger")),r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:"100%"},g.questionImg&&null!==g.questionImg&&r.a.createElement("img",{src:g.questionImg.data,alt:"Aper\xe7u de la question",width:70,height:70}))),!j&&r.a.createElement(d.a,null,r.a.createElement(f.a,{error:Boolean(o.questionText&&n.questionText),helperText:o.questionText&&n.questionText,onBlur:function(e){i(e),k(e)},onChange:l,variant:"outlined",fullWidth:!0,multiline:!0,label:"Text de la question",name:"questionText"}))))),r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(P.a,{display:"flex",flexDirection:"column",width:"100%"},r.a.createElement(d.a,null,r.a.createElement(P.a,{display:"flex",width:"100%"},r.a.createElement(P.a,{display:"flex",width:"50%",alignItems:"center"},r.a.createElement(b.a,{variant:"body1"},"R\xe9ponse")),r.a.createElement(P.a,{display:"flex",width:"50%"},r.a.createElement(Cr.a,{row:!0},r.a.createElement(h.a,{control:r.a.createElement(Jt.a,{checked:!S,onChange:function(){return C(!S)},name:"answerTypeSwitch",color:"secondary"}),label:S?"Image":"Textuelle"}))))),r.a.createElement(d.a,null,S&&r.a.createElement(d.a,null,r.a.createElement(P.a,{display:"flex",justifyContent:"flex-end",width:"100%"},r.a.createElement("input",{type:"file",id:"answerImg-".concat(e.numQuestion),name:"answerImg",hidden:!0,accept:"image/png, image/jpeg",onChange:function(e){return T(e,"answerImg")}}),r.a.createElement("label",{htmlFor:"answerImg-".concat(e.numQuestion),className:t.uploadLabel},"Charger")),r.a.createElement(P.a,{display:"flex",justifyContent:"center",width:"100%"},g.answerImg&&null!==g.answerImg&&r.a.createElement("img",{src:g.answerImg.data,alt:"Aper\xe7u de la question",width:70,height:70}))),!S&&r.a.createElement(d.a,null,r.a.createElement(f.a,{error:Boolean(o.answerText&&n.answerText),helperText:o.answerText&&n.answerText,onBlur:function(e){i(e),k(e)},onChange:l,variant:"outlined",fullWidth:!0,multiline:!0,label:"Text de la r\xe9ponse",name:"answerText"})))))))}))))},Nr=oa.c({titre:oa.d().min(5,"Le titre du document doit contenir au minimum 5 caract\xe8res").max(20,"Le titre du document ne doit pas d\xe9passer 20 caract\xe8res")}),qr=function(e){return Object(ca.a)(Array(e).keys()).map((function(e){return{question:{questionText:"",questionImg:null,answerText:"",answerImg:null},valid:!0}}))};var Ir=function(e){Object(n.useEffect)((function(){}),[]);var t=e.classes,a=Object(n.useRef)();Object(n.useEffect)((function(){e.linkRefHandle&&e.linkRefHandle(a,2)}),[a]);var i={questionsList:e.state.questionsList.length>0?e.state.questionsList.map((function(e){return{question:e,valid:!0}})):qr(10)},l=Object(n.useState)(Object(A.a)({},i)),c=Object(m.a)(l,2),o=c[0],s=c[1],u=function(t){var a=o.questionsList.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{valid:!(""===e.question.questionText&&null===e.question.questionImg||""===e.question.answerText&&null===e.question.answerImg)})}));s({questionsList:a}),a.find((function(e){return!1===e.valid}))||e.submitHandler({questionsList:o.questionsList.map((function(e){return e.question}))},2)};return r.a.createElement(d.a,{component:"main",maxWidth:"xl"},r.a.createElement(p.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(b.a,{component:"h1",variant:"h5"},"Associer un Quiz au cours"),r.a.createElement(ua.a,{initialValues:o,validationSchema:Nr,onSubmit:u},(function(e){e.errors,e.handleBlur,e.handleChange;var a=e.handleSubmit;e.isSubmitting,e.touched,e.values;return r.a.createElement("form",{className:t.form,onSubmit:a},r.a.createElement(Y.a,{container:!0,spacing:2},r.a.createElement(Cr.a,{row:!0},r.a.createElement("label",null,"Sp\xe9cifiez le nombre de question de ce Quiz"),r.a.createElement(Sr.a,{defaultValue:10,"aria-labelledby":"nbr-quest-slider",step:1,marks:!0,min:5,max:30,valueLabelDisplay:"on",onChange:function(e,t){var a;(a=t)>o.questionsList.length?s(Object(A.a)(Object(A.a)({},o),{},{questionsList:[].concat(Object(ca.a)(o.questionsList),Object(ca.a)(qr(a-o.questionsList.length)))})):a<o.questionsList.length&&s(Object(A.a)(Object(A.a)({},o),{},{questionsList:o.questionsList.slice(0,a)}))}}))))})),r.a.createElement(Y.a,{item:!0,xs:12},o.questionsList.map((function(e,t){return r.a.createElement(Pr,{key:t,numQuestion:t+1,question:e.question,valid:e.valid,updateState:function(e){return function(e,t){s(Object(A.a)(Object(A.a)({},o),{},{questionsList:o.questionsList.map((function(a,n){return n!==t?a:Object(A.a)(Object(A.a)({},a),{},{question:e})}))}))}(e,t)}})}))),r.a.createElement(Y.a,{item:!0,xs:12,sm:2},r.a.createElement(y.a,{fullWidth:!0,variant:"contained",color:"primary",ref:a,onClick:u,style:{display:"none"}}))))},Ar={1:r.a.createElement(er.a,null),2:r.a.createElement(Yn.a,null),3:r.a.createElement(Zn.a,null)},Lr=[{title:"Contenu principale"},{title:"R\xe9sum\xe9 du cours"},{title:"Quiz"}];var Rr=function(e){var t=lr(),a=t,i=Object(n.useState)(r.a.createElement(r.a.Fragment,null)),l=Object(m.a)(i,2),c=l[0],o=l[1],s={titre:"",ordre:1,trimestre:1,lien:"",thumbnail:"",titrePdf:"",pdfFile:null,questionsList:[]},u=Object(n.useState)(s),d=Object(m.a)(u,2),p=d[0],g=d[1],f=Object(n.useState)([!1,!1,!1]),h=Object(m.a)(f,2),E=h[0],y=h[1],v=Object(n.useState)(Object(n.createRef)()),j=Object(m.a)(v,2),O=j[0],x=j[1],w=Object(n.useState)(Object(n.createRef)()),S=Object(m.a)(w,2),C=S[0],T=S[1],k=Object(n.useState)(Object(n.createRef)()),N=Object(m.a)(k,2),q=N[0],I=N[1],L=function(e,t){0===t&&x(e),1===t&&T(e),2===t&&I(e)},R=function(e){return y(E.map((function(t,a){return e!==a&&t})))},F=function(e,t){return g(Object(A.a)(Object(A.a)({},p),e)),y(E.map((function(e,a){return e||t===a}))),!0},D=function(e){return r.a.createElement(Y.a,{container:!0,spacing:3},e)};return Lr[0].children=D(r.a.createElement(vr,{withTitle:!0,state:p,linkRefHandle:L,updateStepsStatus:R,submitRefTracker:function(e){x(e)},classes:a,currentClasse:e.currentClasse,submitHandler:F})),Lr[1].children=D(r.a.createElement(wr,{state:p,linkRefHandle:L,updateStepsStatus:R,classes:a,submitHandler:F})),Lr[2].children=D(r.a.createElement(Ir,{state:p,linkRefHandle:L,updateStepsStatus:R,classes:a,submitHandler:F})),r.a.createElement("div",null,r.a.createElement(gr,{StepConnector:cr,labelStepsIconsClasses:t,icons:Ar,steps:Lr,nextBtnIcon:{endIcon:r.a.createElement(nr.a,null)},nexHandler:function(t){return function(t){return 2===t&&3===E.filter((function(e){return!0===e})).length?(console.log("Sending cours ..."),console.log("Questions List : ",p.questionsList),J.addNewCourse(Object(A.a)(Object(A.a)({adminType:"enseignant"},p),{},{matiere:e.teacher.matiere._id,classe:e.currentClasse,ordre:p.ordre+1,video:p.lien,pdf:p.pdfFile.file,enseignant:e.teacher.id})).then((function(t){o(r.a.createElement(r.a.Fragment,null,r.a.createElement(tr.a,{className:a.sucess,fontSize:"large"}),r.a.createElement(b.a,{className:a.sucess,variant:"body1"},"Cours enregistr\xe9 avec succ\xe8s."))),e.onApprendNewCours&&e.onApprendNewCours(t.newCours),g(s)}),(function(e){console.log(e),o(r.a.createElement(r.a.Fragment,null,r.a.createElement(ar.a,{fontSize:"large",className:a.error}),r.a.createElement(b.a,{className:a.error,variant:"body1"},"Une erreur s'est produite. Impossible d'ajouter le cours."),r.a.createElement("p",null,e.message&&e.message||e)))})),E[t]):(0===t&&O.current.click(),1===t&&C.current.click(),2===t&&q.current.click(),E[t])}(t)},backBtnIcon:{startIcon:r.a.createElement(rr.a,null)},finalStep:r.a.createElement(P.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",style:{minHeight:"100px"}},c)}))},Fr=Object(Me.a)({palette:{primary:{main:"#4caf50"},secondary:{main:"#f44336"}}}),Dr=Object(w.a)((function(e){return{button:{margin:e.spacing(1),color:"white"},grid:{padding:e.spacing(2)},red:{color:e.palette.error.light,cursor:"pointer"},purple:{color:Ge.a[300],cursor:"pointer"},buttonRed:{margin:e.spacing(1),color:"white",backgroundColor:e.palette.error.light,cursor:"pointer"},buttonPurple:{margin:e.spacing(1),color:"white",backgroundColor:Ge.a[300],cursor:"pointer"}}}));var Br=Object(c.b)((function(e){return{teacher:e.adminReducer.user}}),{})((function(e){var t=Dr(),a=Object(n.useState)(!1),i=Object(m.a)(a,2),l=i[0],c=i[1],o=Object(n.useState)(!1),s=Object(m.a)(o,2),u=s[0],p=s[1],g=Object(n.useState)({}),h=Object(m.a)(g,2),E=h[0],v=h[1],O=Object(n.useState)([]),x=Object(m.a)(O,2),w=x[0],S=x[1],C=Object(n.useState)([]),T=Object(m.a)(C,2),N=T[0],q=T[1],L=Object(n.useState)([]),R=Object(m.a)(L,2),F=R[0],D=R[1],B=Object(n.useState)(""),_=Object(m.a)(B,2),H=_[0],U=_[1],W=Object(n.useState)(!1),M=Object(m.a)(W,2),z=M[0],G=M[1],V=Object(n.useState)(!1),Q=Object(m.a)(V,2),X=Q[0],$=Q[1],K=Object(n.useState)(""),Z=Object(m.a)(K,2),ee=Z[0],te=(Z[1],Object(n.useState)([])),ae=Object(m.a)(te,2),ne=ae[0],re=ae[1],ie=function(e){return Object(A.a)(Object(A.a)({},e),{},{actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(ta.a,{title:"Modifier"},r.a.createElement(ce.a,{size:"medium",color:"primary",onClick:function(t){return console.log(e)}},r.a.createElement(vn.a,null))),r.a.createElement(ta.a,{title:"Supprimer"},r.a.createElement(ce.a,{size:"medium",color:"secondary",onClick:function(t){return le(e)}},r.a.createElement(jn.a,null)))),attachements:r.a.createElement(r.a.Fragment,null,r.a.createElement(ta.a,{title:"Ce cours contient un ".concat("r\xe9sum\xe9"," en PDF")},r.a.createElement(ce.a,{disabled:!e.pdf||null===e.pdf}," ",r.a.createElement(Yn.a,{fontSize:"large",className:t.red})," ")),r.a.createElement(ta.a,{title:"Ce cours contient un quiz de ".concat(e.quiz.length," questions")},r.a.createElement(ce.a,null," ",r.a.createElement(Zn.a,{fontSize:"large",className:t.purple})," ")))})};Object(n.useEffect)((function(){e.teacher.classes&&e.teacher.classes&&U(e.teacher.classes[0]._id),Ua.push({id:"attachements",numeric:!1,disablePadding:!1,label:"Attachements",withChildComponent:!0}),Ua.push({id:"actions",numeric:!1,disablePadding:!1,label:"Actions",withChildComponent:!0}),c(!0),J.getProfCourses({adminType:"enseignant",id:e.teacher.id}).then((function(t){console.log("Les cours de ce prof : ",t);var a=t.courses.map((function(e){return ie(e)})),n=a.filter((function(t){return t.classe===e.teacher.classes[0]._id}));S(a),q(n),D(n),c(!1)}),(function(e){console.log(e),c(!1)}))}),[]);var le=function(e){re([{label:"Supprimer",className:t.buttonRed,clickHandler:function(t){J.deleteCourse({id:e._id,adminType:"enseignant"}).then((function(t){v({severity:"success",message:"Cours supprim\xe9 avec succ\xe8s"}),p(!0);var a=w.filter((function(t){return t._id!==e._id}));S(a);var n=a.filter((function(e){return e.classe===H}));D(n),q(n),setTimeout((function(){$(!1)}),1e3)}),(function(e){v({severity:"error",message:"Une erreur s'est produite ".concat(e.message&&e.message||e)}),p(!0)}))}},{label:"Annuler",className:t.buttonPurple,clickHandler:function(e){return $(!1)}}]),$(!0)};return r.a.createElement(ct,{className:t.root,title:"Contenu P\xe9dagogique"},r.a.createElement(ze.a,{theme:nt},r.a.createElement(d.a,{maxWidth:"lg",className:t.container},r.a.createElement(k,{open:u,onClose:function(e){return p(!1)},autoHideDuration:6e3,children:r.a.createElement(j.a,{variant:"filled",severity:E.severity},E.message)}),r.a.createElement(Ia,{open:X,title:"Suppression Du Cours",body:r.a.createElement(b.a,{variant:"body1",color:"textSecondary"},"\xebtes-vous s\xfbrs de vouloir supprimer ",ee," ?"),actions:ne,handleClose:function(){return $(!1)}}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12,sm:6},r.a.createElement(P.a,{mt:3,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"row"},r.a.createElement(f.a,{select:!0,fullWidth:!0,value:H,onChange:function(e){U(e.target.value);var t=w.filter((function(t){return t.classe===e.target.value}));D(t),q(t)},label:"Choisissez la classe \xe0 afficher"},e.teacher.classes&&e.teacher.classes.map((function(e){return r.a.createElement(sa.a,{key:e._id,value:e._id},e.codeCl)}))))),r.a.createElement(Y.a,{item:!0,xs:12,sm:8},r.a.createElement(P.a,{mt:3},r.a.createElement(P.a,{maxWidth:500},r.a.createElement(f.a,{fullWidth:!0,InputProps:{startAdornment:r.a.createElement(Tt.a,{position:"start"},r.a.createElement(kt.a,{fontSize:"small",color:"action"},r.a.createElement(Dt.a,null)))},placeholder:"Rechercher un cours ...",variant:"outlined",onChange:function(e){return function(e){if(e.target.value.length<4)q(F);else{var t=e.target.value;q(F.filter((function(e){return e.titre&&-1!==e.titre.indexOf(t)||e.titrePdf&&-1!==e.titrePdf.indexOf(t)})))}}(e)}})))),r.a.createElement(Y.a,{item:!0,xs:12,sm:4},r.a.createElement(P.a,{mt:3,alignItems:"center",justifyContent:"center",display:"flex",flexDirection:"row"},r.a.createElement(ze.a,{theme:Fr},r.a.createElement(y.a,{size:"medium",variant:"contained",className:t.button,startIcon:r.a.createElement(_t.a,null),color:"primary",onClick:function(e){return G(!0)}},"Ajouter")))),r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(ze.a,{theme:rt},r.a.createElement(I,{component:r.a.createElement(la,{withStartCheckbox:!1,tableTitle:"Liste des cours",headCells:Ua,rows:N,indexName:"id",withActions:!1,rowClickHandler:function(){}}),controller:l})))),z&&r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(Ye.a,{className:t.paper,style:{padding:nt.spacing(2)}},r.a.createElement(b.a,{variant:"h4",color:"textPrimary",align:"center"},"Ajouter Un Nouveau Cours"),r.a.createElement(ze.a,{theme:nt},r.a.createElement(Rr,{teacher:e.teacher,currentClasse:H,onApprendNewCours:function(e){return function(e){S([].concat(Object(ca.a)(w),[ie(e)])),q([].concat(Object(ca.a)(N),[ie(e)]))}(e)}}))))))))})),_r=Object(w.a)((function(e){return{button:{margin:e.spacing(1),color:"white"}}}));var Hr=Object(c.b)((function(e){return{user:e.adminReducer.user}}),(function(e){return{}}))((function(e){var t=_r(),a=Ba.map((function(e){return e.label})),i=Object(n.useState)([]),l=Object(m.a)(i,2),c=l[0],o=l[1],s=Object(n.useState)(!1),u=Object(m.a)(s,2),p=u[0],g=u[1];return Object(n.useEffect)((function(){g(!0),J.getProfEleves({adminType:"enseignant",id:e.user._id}).then((function(e){console.log("Tous les \xe9l\xe8ves concern\xe9s par ce prof : ",e),o(e.eleves.map((function(e){return Ba.map((function(t){return e[t.id]}))}))),g(!1)}),(function(e){g(!1),console.log(e)}))}),[]),r.a.createElement(ct,{className:t.root,title:"Eleves"},r.a.createElement(ze.a,{theme:nt},r.a.createElement(d.a,{maxWidth:"lg",className:t.container},r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,xs:12},r.a.createElement(I,{component:r.a.createElement(Ye.a,{className:t.paper},r.a.createElement(Ya.a,{title:"Liste des \xe9l\xe8ves",data:c,columns:a,options:{filterType:"checkbox"}})),controller:p}))))))})),Ur=(a(567),Object(w.a)((function(e){return{root:{backgroundColor:e.palette.background.dark,minHeight:"100%",paddingBottom:e.spacing(3),paddingTop:e.spacing(3)},card:{padding:e.spacing(2)},avatar:{height:100,width:100}}}))),Wr=oa.c({nom:oa.d().max(20,"Le nom de famille ne doit pas d\xe9passer 20 caract\xe8res").required("Champs Obligatoire"),prenom:oa.d().max(50,"Le pr\xe9nom ne doit pas d\xe9passer 50 caract\xe8res").required("Champs Obligatoire"),email:oa.d().email("Adresse Email invalide").required("Champs Obligatoire"),phone:oa.d().trim().matches(/^0[5679]\d{8}$/,"Num\xe9ro de t\xe9lephone invalide").required("Champs Obligatoire"),newpassword:oa.d(),currentpassword:oa.d().test("passwords-match","Vous devez saisir le mot de passe actuel",(function(e){return!this.parent.newpassword||""===this.parent.newpassword||""!==this.parent.newpassword&&e&&""!==e}))}),Mr={type:"input",props:{name:"nom",required:!0,type:"text",label:"Nom"}},zr={type:"input",props:{name:"prenom",required:!0,type:"text",label:"Prenom"}},Gr={type:"input",props:{name:"email",required:!0,type:"email",label:"Email"}},Vr={type:"input",props:{name:"phone",required:!0,type:"text",label:"T\xe9lephone"}},Jr=function(e){return{endAdornment:r.a.createElement(Tt.a,{position:"end"},r.a.createElement(ce.a,{"aria-label":"toggle password visibility",onClick:e.handleClickShowPassword},e.showPassword?r.a.createElement(rn.a,null):r.a.createElement(cn.a,null)))}},Qr=Object(c.b)((function(e){return{user:e.adminReducer.user}}),(function(e){return{updateProfile:function(t){return e(Q.updateProfile(t))}}}))((function(e){e.className;var t=e.cardProps,a=Object(o.a)(e,["className","cardProps"]),i=Ur(),l=a.user,c=Object(n.useState)(Object(A.a)(Object(A.a)({},l),{},{currentpassword:"",newpassword:""})),s=Object(m.a)(c,2),u=s[0],p=s[1],g=Object(n.useState)(!1),b=Object(m.a)(g,2),f=b[0],h=b[1],E=Object(n.useState)(!1),v=Object(m.a)(E,2),O=v[0],x=v[1],w=Object(n.useState)(!1),S=Object(m.a)(w,2),C=S[0],T=S[1],P=Object(n.useState)(!1),N=Object(m.a)(P,2),q=N[0],L=N[1],R=Object(n.useState)({severity:"success",message:"Profile mis \xe0 jours avec succ\xe8s"}),F=Object(m.a)(R,2),D=F[0],B=F[1],_=r.a.createElement(j.a,{variant:"filled",severity:D.severity},D.message),H=Object(n.useState)(0),U=Object(m.a)(H,2),W=U[0];U[1];Mr.props.value=u.nom,zr.props.value=u.prenom,Gr.props.value=u.email,Vr.props.value=u.phone;var M=function(e){"currentpassword"===e&&x(!O),"newpassword"===e&&T(!C)},z={type:"input",props:{name:"currentpassword",type:O?"text":"password",label:"Mot de passe actuel",InputProps:Jr({showPassword:O,handleClickShowPassword:function(e){return M("currentpassword")}})}},G={type:"input",props:{name:"newpassword",type:C?"text":"password",label:"Nouveau mot de passe",InputProps:Jr({showPassword:C,handleClickShowPassword:function(e){return M("newpassword")}})}},V=[[Mr,zr],[Gr,Vr],[z,G]];return r.a.createElement(ct,{className:i.root,title:"Compte"},r.a.createElement(d.a,{maxWidth:"lg"},r.a.createElement(k,{open:q,onClose:function(){return L(!1)},autoHideDuration:6e3,children:_}),r.a.createElement(Y.a,{container:!0,spacing:3},r.a.createElement(Y.a,{item:!0,lg:4,md:6,xs:12},r.a.createElement(Aa.a,t,r.a.createElement(La.a,null,r.a.createElement(De,{firstname:l.nom,lastname:l.prenom,avatar:u.imgFile&&u.imgFile.data||l.image,descriptionTitle:l.jobTitle,classes:i})),r.a.createElement(qe.a,null),r.a.createElement(tn.a,null,r.a.createElement("form",{encType:"multipart/form-data"},r.a.createElement("input",{type:"file",id:"profilePicture",name:"profilePicture",hidden:!0,accept:"image/png, image/jpeg",onChange:function(e){var t=e.currentTarget.files[0],a=new FileReader;a.onload=function(){var e={file:t,data:a.result,isUploading:!1},n=Object(A.a)(Object(A.a)({},u),{},{imgFile:e});p(n)},a.onerror=function(){console.log("Une est s'est produite lors de chargement de l'image depuis le disque")},a.readAsDataURL(t)}})),r.a.createElement(y.a,{component:"label",htmlFor:"profilePicture",color:"primary",fullWidth:!0,variant:"text"},"Modifier votre avatar")))),r.a.createElement(Y.a,{item:!0,lg:8,md:6,xs:12},r.a.createElement(Aa.a,null,r.a.createElement(an.a,{subheader:"Vous pouvez modifier vos informations",title:"Param\xe8tres du profile"}),r.a.createElement(qe.a,null),r.a.createElement(I,{component:r.a.createElement(da,{validationSchema:Wr,fieldsHiearchy:V,initialState:u,onChange:function(e){p(Object(A.a)(Object(A.a)({},u),{},Object(ne.a)({},e.target.name,e.target.value)))},onSubmit:function(e){var t=Object.assign.apply(Object,[{}].concat(Object(ca.a)(Object.keys(l).map((function(t){return e[t]&&l[t]!==e[t]&&""!==e[t]?Object(ne.a)({},t,e[t]):void 0})).filter((function(e){return!("undefined"===typeof e)})))));console.log(u.imgFile),u.imgFile&&(t.image=u.imgFile.file),e.currentpassword&&e.newpassword&&(t.oldPassword=e.currentpassword,t.newPassword=e.newpassword),Object.keys(t).length&&(t.id=l.id,h(!0),a.updateProfile(Object(A.a)(Object(A.a)({},t),{},{adminType:"enseignant",id:l.id})).then((function(e){B({severity:"success",message:"Profile mis \xe0 jours avec succ\xe8s"}),L(!0),h(!1)}),(function(e){B({severity:"error",message:"Une erreur s'est produite ".concat(e.message?e.message:"")}),L(!0),h(!1)})))},submitLabel:"Mettre \xe0 jours"}),controller:f})))),r.a.createElement(Y.a,{container:!0,justify:"center"},r.a.createElement(Y.a,{item:!0,xs:12,sm:8},null!=u.avatar&&W>0&&r.a.createElement(On.a,{variant:"determinate",color:"primary",value:W})))))}));var Xr=function(e){return r.a.createElement("div",null,r.a.createElement(P.a,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",style:{height:"100vh"}},r.a.createElement(b.a,{variant:"h1",color:"textSecondary"}," Not Implemented Yet"),r.a.createElement(b.a,{variant:"h5",color:"textSecondary"}," Coming Soon")))};function $r(e){var t=e.component,a=e.adminType,n=e.from,i=Object(o.a)(e,["component","adminType","from"]);return r.a.createElement(s.c,Object.assign({},i,{element:function(e){return null!==localStorage.getItem("manager"===e?"manager":"enseignant")}(a)?r.a.createElement(t,void 0):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:n}}})}))}var Kr=Object(c.b)((function(e){return{currentAdminType:e.adminReducer.adminType}}),(function(e){return{}}))((function(e){return r.a.createElement(u.a,null,r.a.createElement(s.e,null,r.a.createElement(s.c,{path:"/login",element:r.a.createElement(te,null)}),r.a.createElement(s.c,{path:"/logout",element:r.a.createElement(ae,null)}),"manager"===e.currentAdminType&&r.a.createElement(s.c,{path:"/",element:r.a.createElement($r,{component:We,adminType:"manager",from:"/",path:"/"})},r.a.createElement(s.c,{path:"",element:r.a.createElement(Ct,null)}),r.a.createElement(s.c,{path:"enseignants",element:r.a.createElement(Va,null)}),r.a.createElement(s.c,{path:"cyclesannes",element:r.a.createElement(Ct,null)}),r.a.createElement(s.c,{path:"abonnes",element:r.a.createElement($a,null)}),r.a.createElement(s.c,{path:"eleves",element:r.a.createElement(en,null)}),r.a.createElement(s.c,{path:"statistiques",element:r.a.createElement(Kn,null)}),r.a.createElement(s.c,{path:"profile",element:r.a.createElement(En,null)}),r.a.createElement(s.c,{path:"pubs",element:r.a.createElement(Pn,null)})),"enseignant"===e.currentAdminType&&r.a.createElement(s.c,{path:"/teacher",element:r.a.createElement($r,{component:Ke,adminType:"enseignant",from:"/teacher",path:"/teacher"})},r.a.createElement(s.c,{path:"contenu",element:r.a.createElement(Br,null)}),r.a.createElement(s.c,{path:"eleves",element:r.a.createElement(Hr,null)}),r.a.createElement(s.c,{path:"statistiques",element:r.a.createElement(Xr,null)}),r.a.createElement(s.c,{path:"profile",element:r.a.createElement(Qr,null)}))))})),Yr=r.a.createContext(),Zr=r.a.createContext();function ei(e,t){switch(t.type){case"TOGGLE_SIDEBAR":return Object(A.a)(Object(A.a)({},e),{},{isSidebarOpened:!e.isSidebarOpened});case"CHANGE_SELECTED_LINK":return Object(A.a)(Object(A.a)({},e),{},{selectedLink:t.payload.link});default:throw new Error("Unhandled action type: ".concat(t.type))}}function ti(e){var t=e.children,a=r.a.useReducer(ei,{isSidebarOpened:!0,selectedLink:"/"}),n=Object(m.a)(a,2),i=n[0],l=n[1];return r.a.createElement(Yr.Provider,{value:i},r.a.createElement(Zr.Provider,{value:l},t))}var ai=a(47),ni={theme:"main",selectedLink:"dashboard"},ri={user:JSON.parse(localStorage.getItem("manager"))||{},adminType:"manager"};var ii=Object(ai.c)({managerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ri,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROFILE":return{user:Object(A.a)(Object(A.a)({},e.user),t.payload)};case"SET_CURRENT_MANAGER":return Object(A.a)(Object(A.a)({},e),{},{user:Object(A.a)(Object(A.a)({},e.user),t.payload)});case"MANAGER_LOGIN_FAILED":return{loginStatus:{success:!1,message:t.payload}};case"LOGOUT":return ri;default:return e}},managerLayoutReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ni,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SELECTED_NAVLINK":return Object(A.a)(Object(A.a)({},e),{},{selectedLink:t.payload.selectedLink});default:return e}}}),li={theme:"main",selectedLink:"dashboard"},ci={user:JSON.parse(localStorage.getItem("enseignant"))||{},adminType:"enseignant"};var oi=Object(ai.c)({managerReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ci,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROFILE":return{user:Object(A.a)(Object(A.a)({},e.user),t.payload)};default:return e}},managerLayoutReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:li,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SELECTED_NAVLINK":return Object(A.a)(Object(A.a)({},e),{},{selectedLink:t.payload.selectedLink});default:return e}}}),si={theme:"main",selectedLink:"dashboard"},ui={user:JSON.parse(localStorage.getItem("manager"))||JSON.parse(localStorage.getItem("enseignant"))||{},adminType:null!==JSON.parse(localStorage.getItem("enseignant"))?"enseignant":"manager",status:{}};var mi=Object(ai.c)({adminReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ui,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PROFILE":return Object(A.a)(Object(A.a)({},e),{},{user:Object(A.a)(Object(A.a)({},e.user),t.payload)});case"SET_CURRENT_MANAGER":return Object(A.a)(Object(A.a)({},e),{},{user:Object(A.a)(Object(A.a)({},e.user),t.payload),adminType:"manager"});case"SET_CURRENT_TEACHER":return Object(A.a)(Object(A.a)({},e),{},{user:Object(A.a)(Object(A.a)({},e.user),t.payload),adminType:"enseignant"});case"MANAGER_LOGIN_FAILED":return Object(A.a)(Object(A.a)({},e),{},{status:Object(A.a)(Object(A.a)({},e.status),{},{loginStatus:{success:!1,message:t.payload}})});case"LOGOUT":return ui;default:return e}},managerLayoutReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:si,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SELECTED_NAVLINK":return Object(A.a)(Object(A.a)({},e),{},{selectedLink:t.payload.selectedLink});default:return e}}}),di=(Object(ai.e)(ii,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),a(299)),pi=(Object(ai.e)(oi,Object(ai.d)(Object(ai.a)(di.a),window.__REDUX_DEVTOOLS_EXTENSION__())),Object(ai.e)(mi,Object(ai.d)(Object(ai.a)(di.a),window.__REDUX_DEVTOOLS_EXTENSION__())));var gi=function(){return r.a.createElement(ti,null,r.a.createElement(c.a,{store:pi},r.a.createElement(Kr,null)))};var bi=function(){return r.a.createElement("div",null,r.a.createElement(gi,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(bi,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[607,1,2]]]);
//# sourceMappingURL=main.3e7d0101.chunk.js.map